/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ({

/***/ "./example/node.ts":
/*!*************************!*\
  !*** ./example/node.ts ***!
  \*************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(__dirname) {/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _Src_index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @Src/index */ \"./src/index.ts\");\n\n\nvar path = __webpack_require__(/*! path */ \"path\");\n(function () { return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[\"__awaiter\"])(void 0, void 0, void 0, function () {\n    var ear, water, mc, b64;\n    return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[\"__generator\"])(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                ear = path.resolve(__dirname, './images/ear.png');\n                water = path.resolve(__dirname, './images/watermark.jpg');\n                mc = new _Src_index__WEBPACK_IMPORTED_MODULE_1__[\"MCompose\"]();\n                mc.background('http://mtapplet.meitudata.com/596c72073971d86b5128.jpg', {\n                    type: 'origin',\n                });\n                mc.add(ear, {\n                    width: 482,\n                    // crop: {\n                    //     x: 192,\n                    //     y: 84,\n                    //     width: 365,\n                    //     height: 365,\n                    //     radius: '50%',\n                    // },\n                    pos: {\n                        x: 150,\n                        y: 50,\n                        scale: 1,\n                        rotate: 0,\n                    },\n                });\n                mc.watermark(water, {\n                    width: '40%',\n                    pos: 'rightBottom',\n                });\n                mc.rect({\n                    x: 0,\n                    y: 'bottom:0',\n                    width: '100%',\n                    height: 300,\n                    radius: 30,\n                    strokeWidth: 5,\n                    strokeColor: '#996699',\n                    fillColor: 'rgba(0,0,0,.5)',\n                });\n                mc.circle({\n                    x: 'center',\n                    y: 'center',\n                    r: 100,\n                    strokeWidth: 5,\n                    strokeColor: '#996699',\n                    fillColor: 'rgba(0,0,0,.5)',\n                });\n                mc.text('<b>Large/Stroke</b><br>Normal/Gradient<br><s>Small/Shadow</s>', {\n                    width: '600',\n                    align: 'center',\n                    largeStyle: {\n                        color: 'red',\n                        font: '90px Microsoft YaHei,sans-serif',\n                        type: 'stroke',\n                        lineWidth: 2,\n                        lineHeight: 90,\n                    },\n                    normalStyle: {\n                        color: 'blue',\n                        font: '70px Microsoft YaHei,sans-serif',\n                        lineHeight: 70,\n                        // shadow:{\n                        //     color: 'red',\n                        //     blur: 4,\n                        //     offsetX: 2,\n                        //     offsetY: 2,\n                        // },\n                        gradient: {\n                            type: 2,\n                            colorStop: ['red', 'blue'],\n                        },\n                    },\n                    smallStyle: {\n                        color: 'yellow',\n                        font: '50px Microsoft YaHei,sans-serif',\n                        lineHeight: 50,\n                        shadow: {\n                            color: 'red',\n                            blur: 10,\n                            offsetX: 5,\n                            offsetY: 5,\n                        },\n                    },\n                    pos: {\n                        x: 'center',\n                        y: 'bottom',\n                        rotate: 0,\n                    },\n                });\n                return [4 /*yield*/, mc.draw()];\n            case 1:\n                b64 = _a.sent();\n                console.log(b64);\n                return [2 /*return*/];\n        }\n    });\n}); })();\n\n/* WEBPACK VAR INJECTION */}.call(this, \"example\"))\n\n//# sourceURL=webpack:///./example/node.ts?");

/***/ }),

/***/ "./node_modules/canvas/build/Release/canvas.node":
/*!*******************************************************!*\
  !*** ./node_modules/canvas/build/Release/canvas.node ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(module) {try {global.process.dlopen(module, \"/Users/guoxiaodong/Documents/App/@github/mcanvas/node_modules/canvas/build/Release/canvas.node\"); } catch(e) {throw new Error('Cannot open ' + \"/Users/guoxiaodong/Documents/App/@github/mcanvas/node_modules/canvas/build/Release/canvas.node\" + ': ' + e);}\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../webpack/buildin/module.js */ \"./node_modules/webpack/buildin/module.js\")(module)))\n\n//# sourceURL=webpack:///./node_modules/canvas/build/Release/canvas.node?");

/***/ }),

/***/ "./node_modules/canvas/index.js":
/*!**************************************!*\
  !*** ./node_modules/canvas/index.js ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("const Canvas = __webpack_require__(/*! ./lib/canvas */ \"./node_modules/canvas/lib/canvas.js\")\nconst Image = __webpack_require__(/*! ./lib/image */ \"./node_modules/canvas/lib/image.js\")\nconst CanvasRenderingContext2D = __webpack_require__(/*! ./lib/context2d */ \"./node_modules/canvas/lib/context2d.js\")\nconst parseFont = __webpack_require__(/*! ./lib/parse-font */ \"./node_modules/canvas/lib/parse-font.js\")\nconst packageJson = __webpack_require__(/*! ./package.json */ \"./node_modules/canvas/package.json\")\nconst bindings = __webpack_require__(/*! ./lib/bindings */ \"./node_modules/canvas/lib/bindings.js\")\nconst fs = __webpack_require__(/*! fs */ \"fs\")\nconst PNGStream = __webpack_require__(/*! ./lib/pngstream */ \"./node_modules/canvas/lib/pngstream.js\")\nconst PDFStream = __webpack_require__(/*! ./lib/pdfstream */ \"./node_modules/canvas/lib/pdfstream.js\")\nconst JPEGStream = __webpack_require__(/*! ./lib/jpegstream */ \"./node_modules/canvas/lib/jpegstream.js\")\nconst DOMMatrix = __webpack_require__(/*! ./lib/DOMMatrix */ \"./node_modules/canvas/lib/DOMMatrix.js\").DOMMatrix\nconst DOMPoint = __webpack_require__(/*! ./lib/DOMMatrix */ \"./node_modules/canvas/lib/DOMMatrix.js\").DOMPoint\n\nfunction createCanvas (width, height, type) {\n  return new Canvas(width, height, type)\n}\n\nfunction createImageData (array, width, height) {\n  return new bindings.ImageData(array, width, height)\n}\n\nfunction loadImage (src) {\n  return new Promise((resolve, reject) => {\n    const image = new Image()\n\n    function cleanup () {\n      image.onload = null\n      image.onerror = null\n    }\n\n    image.onload = () => { cleanup(); resolve(image) }\n    image.onerror = (err) => { cleanup(); reject(err) }\n\n    image.src = src\n  })\n}\n\n/**\n * Resolve paths for registerFont. Must be called *before* creating a Canvas\n * instance.\n * @param src {string} Path to font file.\n * @param fontFace {{family: string, weight?: string, style?: string}} Object\n * specifying font information. `weight` and `style` default to `\"normal\"`.\n */\nfunction registerFont (src, fontFace) {\n  // TODO this doesn't need to be on Canvas; it should just be a static method\n  // of `bindings`.\n  return Canvas._registerFont(fs.realpathSync(src), fontFace)\n}\n\nmodule.exports = {\n  Canvas,\n  Context2d: CanvasRenderingContext2D, // Legacy/compat export\n  CanvasRenderingContext2D,\n  CanvasGradient: bindings.CanvasGradient,\n  CanvasPattern: bindings.CanvasPattern,\n  Image,\n  ImageData: bindings.ImageData,\n  PNGStream,\n  PDFStream,\n  JPEGStream,\n  DOMMatrix,\n  DOMPoint,\n\n  registerFont,\n  parseFont,\n\n  createCanvas,\n  createImageData,\n  loadImage,\n\n  backends: bindings.Backends,\n\n  /** Library version. */\n  version: packageJson.version,\n  /** Cairo version. */\n  cairoVersion: bindings.cairoVersion,\n  /** jpeglib version. */\n  jpegVersion: bindings.jpegVersion,\n  /** gif_lib version. */\n  gifVersion: bindings.gifVersion ? bindings.gifVersion.replace(/[^.\\d]/g, '') : undefined,\n  /** freetype version. */\n  freetypeVersion: bindings.freetypeVersion\n}\n\n\n//# sourceURL=webpack:///./node_modules/canvas/index.js?");

/***/ }),

/***/ "./node_modules/canvas/lib/DOMMatrix.js":
/*!**********************************************!*\
  !*** ./node_modules/canvas/lib/DOMMatrix.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nconst util = __webpack_require__(/*! util */ \"util\")\n\n// DOMMatrix per https://drafts.fxtf.org/geometry/#DOMMatrix\n\nfunction DOMPoint(x, y, z, w) {\n  if (!(this instanceof DOMPoint)) {\n    throw new TypeError(\"Class constructors cannot be invoked without 'new'\")\n  }\n\n  if (typeof x === 'object') {\n    w = x.w\n    z = x.z\n    y = x.y\n    x = x.x\n  }\n  this.x = typeof x === 'number' ? x : 0\n  this.y = typeof y === 'number' ? y : 0\n  this.z = typeof z === 'number' ? z : 0\n  this.w = typeof w === 'number' ? w : 1\n}\n\n// Constants to index into _values (col-major)\nconst M11 = 0, M12 = 1, M13 = 2, M14 = 3\nconst M21 = 4, M22 = 5, M23 = 6, M24 = 7\nconst M31 = 8, M32 = 9, M33 = 10, M34 = 11\nconst M41 = 12, M42 = 13, M43 = 14, M44 = 15\n\nconst DEGREE_PER_RAD = 180 / Math.PI\nconst RAD_PER_DEGREE = Math.PI / 180\n\nfunction parseMatrix(init) {\n  var parsed = init.replace(/matrix\\(/, '')\n  parsed = parsed.split(/,/, 7) // 6 + 1 to handle too many params\n  if (parsed.length !== 6) throw new Error(`Failed to parse ${init}`)\n  parsed = parsed.map(parseFloat)\n  return [\n    parsed[0], parsed[1], 0, 0,\n    parsed[2], parsed[3], 0, 0,\n    0, 0, 1, 0,\n    parsed[4], parsed[5], 0, 1\n  ]\n}\n\nfunction parseMatrix3d(init) {\n  var parsed = init.replace(/matrix3d\\(/, '')\n  parsed = parsed.split(/,/, 17) // 16 + 1 to handle too many params\n  if (parsed.length !== 16) throw new Error(`Failed to parse ${init}`)\n  return parsed.map(parseFloat)\n}\n\nfunction parseTransform(tform) {\n  var type = tform.split(/\\(/, 1)[0]\n  switch (type) {\n    case 'matrix':\n      return parseMatrix(tform)\n    case 'matrix3d':\n      return parseMatrix3d(tform)\n    // TODO This is supposed to support any CSS transform value.\n    default:\n      throw new Error(`${type} parsing not implemented`)\n  }\n}\n\nfunction DOMMatrix (init) {\n  if (!(this instanceof DOMMatrix)) {\n    throw new TypeError(\"Class constructors cannot be invoked without 'new'\")\n  }\n\n  this._is2D = true\n  this._values = new Float64Array([\n    1, 0, 0, 0,\n    0, 1, 0, 0,\n    0, 0, 1, 0,\n    0, 0, 0, 1\n  ])\n\n  var i\n\n  if (typeof init === 'string') { // parse CSS transformList\n    if (init === '') return // default identity matrix\n    var tforms = init.split(/\\)\\s+/, 20).map(parseTransform)\n    if (tforms.length === 0) return\n    init = tforms[0]\n    for (i = 1; i < tforms.length; i++) init = multiply(tforms[i], init)\n  }\n\n  i = 0\n  if (init && init.length === 6) {\n    setNumber2D(this, M11, init[i++])\n    setNumber2D(this, M12, init[i++])\n    setNumber2D(this, M21, init[i++])\n    setNumber2D(this, M22, init[i++])\n    setNumber2D(this, M41, init[i++])\n    setNumber2D(this, M42, init[i++])\n  } else if (init && init.length === 16) {\n    setNumber2D(this, M11, init[i++])\n    setNumber2D(this, M12, init[i++])\n    setNumber3D(this, M13, init[i++])\n    setNumber3D(this, M14, init[i++])\n    setNumber2D(this, M21, init[i++])\n    setNumber2D(this, M22, init[i++])\n    setNumber3D(this, M23, init[i++])\n    setNumber3D(this, M24, init[i++])\n    setNumber3D(this, M31, init[i++])\n    setNumber3D(this, M32, init[i++])\n    setNumber3D(this, M33, init[i++])\n    setNumber3D(this, M34, init[i++])\n    setNumber2D(this, M41, init[i++])\n    setNumber2D(this, M42, init[i++])\n    setNumber3D(this, M43, init[i++])\n    setNumber3D(this, M44, init[i])\n  } else if (init !== undefined) {\n    throw new TypeError('Expected string or array.')\n  }\n}\n\nDOMMatrix.fromMatrix = function (init) {\n  if (!(init instanceof DOMMatrix)) throw new TypeError('Expected DOMMatrix')\n  return new DOMMatrix(init._values)\n}\nDOMMatrix.fromFloat32Array = function (init) {\n  if (!(init instanceof Float32Array)) throw new TypeError('Expected Float32Array')\n  return new DOMMatrix(init)\n}\nDOMMatrix.fromFloat64Array = function (init) {\n  if (!(init instanceof Float64Array)) throw new TypeError('Expected Float64Array')\n  return new DOMMatrix(init)\n}\n\n// TODO || is for Node.js pre-v6.6.0\nDOMMatrix.prototype[util.inspect.custom || 'inspect'] = function (depth, options) {\n  if (depth < 0) return '[DOMMatrix]'\n\n  return `DOMMatrix [\n    a: ${this.a}\n    b: ${this.b}\n    c: ${this.c}\n    d: ${this.d}\n    e: ${this.e}\n    f: ${this.f}\n    m11: ${this.m11}\n    m12: ${this.m12}\n    m13: ${this.m13}\n    m14: ${this.m14}\n    m21: ${this.m21}\n    m22: ${this.m22}\n    m23: ${this.m23}\n    m23: ${this.m23}\n    m31: ${this.m31}\n    m32: ${this.m32}\n    m33: ${this.m33}\n    m34: ${this.m34}\n    m41: ${this.m41}\n    m42: ${this.m42}\n    m43: ${this.m43}\n    m44: ${this.m44}\n    is2D: ${this.is2D}\n    isIdentity: ${this.isIdentity} ]`\n}\n\nDOMMatrix.prototype.toString = function () {\n  return this.is2D ?\n    `matrix(${this.a}, ${this.b}, ${this.c}, ${this.d}, ${this.e}, ${this.f})` :\n    `matrix3d(${this._values.join(', ')})`\n}\n\n/**\n * Checks that `value` is a number and sets the value.\n */\nfunction setNumber2D(receiver, index, value) {\n  if (typeof value !== 'number') throw new TypeError('Expected number')\n  return receiver._values[index] = value\n}\n\n/**\n * Checks that `value` is a number, sets `_is2D = false` if necessary and sets\n * the value.\n */\nfunction setNumber3D(receiver, index, value) {\n  if (typeof value !== 'number') throw new TypeError('Expected number')\n  if (index === M33 || index === M44) {\n    if (value !== 1) receiver._is2D = false\n  } else if (value !== 0) receiver._is2D = false\n  return receiver._values[index] = value\n}\n\nObject.defineProperties(DOMMatrix.prototype, {\n  m11: {get: function () { return this._values[M11] }, set: function (v) { return setNumber2D(this, M11, v) }},\n  m12: {get: function () { return this._values[M12] }, set: function (v) { return setNumber2D(this, M12, v) }},\n  m13: {get: function () { return this._values[M13] }, set: function (v) { return setNumber3D(this, M13, v) }},\n  m14: {get: function () { return this._values[M14] }, set: function (v) { return setNumber3D(this, M14, v) }},\n  m21: {get: function () { return this._values[M21] }, set: function (v) { return setNumber2D(this, M21, v) }},\n  m22: {get: function () { return this._values[M22] }, set: function (v) { return setNumber2D(this, M22, v) }},\n  m23: {get: function () { return this._values[M23] }, set: function (v) { return setNumber3D(this, M23, v) }},\n  m24: {get: function () { return this._values[M24] }, set: function (v) { return setNumber3D(this, M24, v) }},\n  m31: {get: function () { return this._values[M31] }, set: function (v) { return setNumber3D(this, M31, v) }},\n  m32: {get: function () { return this._values[M32] }, set: function (v) { return setNumber3D(this, M32, v) }},\n  m33: {get: function () { return this._values[M33] }, set: function (v) { return setNumber3D(this, M33, v) }},\n  m34: {get: function () { return this._values[M34] }, set: function (v) { return setNumber3D(this, M34, v) }},\n  m41: {get: function () { return this._values[M41] }, set: function (v) { return setNumber2D(this, M41, v) }},\n  m42: {get: function () { return this._values[M42] }, set: function (v) { return setNumber2D(this, M42, v) }},\n  m43: {get: function () { return this._values[M43] }, set: function (v) { return setNumber3D(this, M43, v) }},\n  m44: {get: function () { return this._values[M44] }, set: function (v) { return setNumber3D(this, M44, v) }},\n\n  a: {get: function () { return this.m11 }, set: function (v) { return this.m11 = v }},\n  b: {get: function () { return this.m12 }, set: function (v) { return this.m12 = v }},\n  c: {get: function () { return this.m21 }, set: function (v) { return this.m21 = v }},\n  d: {get: function () { return this.m22 }, set: function (v) { return this.m22 = v }},\n  e: {get: function () { return this.m41 }, set: function (v) { return this.m41 = v }},\n  f: {get: function () { return this.m42 }, set: function (v) { return this.m42 = v }},\n\n  is2D: {get: function () { return this._is2D }}, // read-only\n\n  isIdentity: {\n    get: function () {\n      var values = this._values\n      return values[M11] === 1 && values[M12] === 0 && values[M13] === 0 && values[M14] === 0 &&\n             values[M21] === 0 && values[M22] === 1 && values[M23] === 0 && values[M24] === 0 &&\n             values[M31] === 0 && values[M32] === 0 && values[M33] === 1 && values[M34] === 0 &&\n             values[M41] === 0 && values[M42] === 0 && values[M43] === 0 && values[M44] === 1\n    }\n  }\n})\n\n/**\n * Instantiates a DOMMatrix, bypassing the constructor.\n * @param {Float64Array} values Value to assign to `_values`. This is assigned\n *   without copying (okay because all usages are followed by a  multiply).\n */\nfunction newInstance(values) {\n  var instance = Object.create(DOMMatrix.prototype)\n  instance.constructor = DOMMatrix\n  instance._is2D = true\n  instance._values = values\n  return instance\n}\n\nfunction multiply(A, B) {\n  var dest = new Float64Array(16)\n  for (var i = 0; i < 4; i++) {\n    for (var j = 0; j < 4; j++) {\n      var sum = 0\n      for (var k = 0; k < 4; k++) {\n        sum += A[i * 4 + k] * B[k * 4 + j]\n      }\n      dest[i * 4 + j] = sum\n    }\n  }\n  return dest\n}\n\nDOMMatrix.prototype.multiply = function (other) {\n  return newInstance(this._values).multiplySelf(other)\n}\nDOMMatrix.prototype.multiplySelf = function (other) {\n  this._values = multiply(other._values, this._values)\n  if (!other.is2D) this._is2D = false\n  return this\n}\nDOMMatrix.prototype.preMultiplySelf = function (other) {\n  this._values = multiply(this._values, other._values)\n  if (!other.is2D) this._is2D = false\n  return this\n}\n\nDOMMatrix.prototype.translate = function (tx, ty, tz) {\n  return newInstance(this._values).translateSelf(tx, ty, tz)\n}\nDOMMatrix.prototype.translateSelf = function (tx, ty, tz) {\n  if (typeof tx !== 'number') tx = 0\n  if (typeof ty !== 'number') ty = 0\n  if (typeof tz !== 'number') tz = 0\n  this._values = multiply([\n    1, 0, 0, 0,\n    0, 1, 0, 0,\n    0, 0, 1, 0,\n    tx, ty, tz, 1\n  ], this._values)\n  if (tz !== 0) this._is2D = false\n  return this\n}\n\nDOMMatrix.prototype.scale = function (scaleX, scaleY, scaleZ, originX, originY, originZ) {\n  return newInstance(this._values).scaleSelf(scaleX, scaleY, scaleZ, originX, originY, originZ)\n}\nDOMMatrix.prototype.scale3d = function (scale, originX, originY, originZ) {\n  return newInstance(this._values).scale3dSelf(scale, originX, originY, originZ)\n}\nDOMMatrix.prototype.scale3dSelf = function (scale, originX, originY, originZ) {\n  return this.scaleSelf(scale, scale, scale, originX, originY, originZ)\n}\nDOMMatrix.prototype.scaleSelf = function (scaleX, scaleY, scaleZ, originX, originY, originZ) {\n  // Not redundant with translate's checks because we need to negate the values later.\n  if (typeof originX !== 'number') originX = 0\n  if (typeof originY !== 'number') originY = 0\n  if (typeof originZ !== 'number') originZ = 0\n  this.translateSelf(originX, originY, originZ)\n  if (typeof scaleX !== 'number') scaleX = 1\n  if (typeof scaleY !== 'number') scaleY = scaleX\n  if (typeof scaleZ !== 'number') scaleZ = 1\n  this._values = multiply([\n    scaleX, 0, 0, 0,\n    0, scaleY, 0, 0,\n    0, 0, scaleZ, 0,\n    0, 0, 0, 1\n  ], this._values)\n  this.translateSelf(-originX, -originY, -originZ)\n  if (scaleZ !== 1 || originZ !== 0) this._is2D = false\n  return this\n}\n\nDOMMatrix.prototype.rotateFromVector = function (x, y) {\n  return newInstance(this._values).rotateFromVectorSelf(x, y)\n}\nDOMMatrix.prototype.rotateFromVectorSelf = function (x, y) {\n  if (typeof x !== 'number') x = 0\n  if (typeof y !== 'number') y = 0\n  var theta = (x === 0 && y === 0) ? 0 : Math.atan2(y, x) * DEGREE_PER_RAD\n  return this.rotateSelf(theta)\n}\nDOMMatrix.prototype.rotate = function (rotX, rotY, rotZ) {\n  return newInstance(this._values).rotateSelf(rotX, rotY, rotZ)\n}\nDOMMatrix.prototype.rotateSelf = function (rotX, rotY, rotZ) {\n  if (rotY === undefined && rotZ === undefined) {\n    rotZ = rotX\n    rotX = rotY = 0\n  }\n  if (typeof rotY !== 'number') rotY = 0\n  if (typeof rotZ !== 'number') rotZ = 0\n  if (rotX !== 0 || rotY !== 0) this._is2D = false\n  rotX *= RAD_PER_DEGREE\n  rotY *= RAD_PER_DEGREE\n  rotZ *= RAD_PER_DEGREE\n  var c, s\n  c = Math.cos(rotZ)\n  s = Math.sin(rotZ)\n  this._values = multiply([\n    c, s, 0, 0,\n    -s, c, 0, 0,\n    0, 0, 1, 0,\n    0, 0, 0, 1\n  ], this._values)\n  c = Math.cos(rotY)\n  s = Math.sin(rotY)\n  this._values = multiply([\n    c, 0, -s, 0,\n    0, 1, 0, 0,\n    s, 0, c, 0,\n    0, 0, 0, 1\n  ], this._values)\n  c = Math.cos(rotX)\n  s = Math.sin(rotX)\n  this._values = multiply([\n    1, 0, 0, 0,\n    0, c, s, 0,\n    0, -s, c, 0,\n    0, 0, 0, 1\n  ], this._values)\n  return this\n}\n\nDOMMatrix.prototype.rotateAxisAngle = function (x, y, z, angle) {\n  return newInstance(this._values).rotateAxisAngleSelf(x, y, z, angle)\n}\nDOMMatrix.prototype.rotateAxisAngleSelf = function (x, y, z, angle) {\n  if (typeof x !== 'number') x = 0\n  if (typeof y !== 'number') y = 0\n  if (typeof z !== 'number') z = 0\n  // Normalize axis\n  var length = Math.sqrt(x * x + y * y + z * z)\n  if (length === 0) return this\n  if (length !== 1) {\n    x /= length\n    y /= length\n    z /= length\n  }\n  angle *= RAD_PER_DEGREE\n  var c = Math.cos(angle)\n  var s = Math.sin(angle)\n  var t = 1 - c\n  var tx = t * x\n  var ty = t * y\n  // NB: This is the generic transform. If the axis is a major axis, there are\n  // faster transforms.\n  this._values = multiply([\n    tx * x + c,      tx * y + s * z,  tx * z - s * y,  0,\n    tx * y - s * z,  ty * y + c,      ty * z + s * x,  0,\n    tx * z + s * y,  ty * z - s * x,  t * z * z + c,   0,\n    0,               0,               0,               1\n  ], this._values)\n  if (x !== 0 || y !== 0) this._is2D = false\n  return this\n}\n\nDOMMatrix.prototype.skewX = function (sx) {\n  return newInstance(this._values).skewXSelf(sx)\n}\nDOMMatrix.prototype.skewXSelf = function (sx) {\n  if (typeof sx !== 'number') return this\n  var t = Math.tan(sx * RAD_PER_DEGREE)\n  this._values = multiply([\n    1, 0, 0, 0,\n    t, 1, 0, 0,\n    0, 0, 1, 0,\n    0, 0, 0, 1\n  ], this._values)\n  return this\n}\n\nDOMMatrix.prototype.skewY = function (sy) {\n  return newInstance(this._values).skewYSelf(sy)\n}\nDOMMatrix.prototype.skewYSelf = function (sy) {\n  if (typeof sy !== 'number') return this\n  var t = Math.tan(sy * RAD_PER_DEGREE)\n  this._values = multiply([\n    1, t, 0, 0,\n    0, 1, 0, 0,\n    0, 0, 1, 0,\n    0, 0, 0, 1\n  ], this._values)\n  return this\n}\n\nDOMMatrix.prototype.flipX = function () { \n  return newInstance(multiply([\n    -1, 0, 0, 0,\n    0, 1, 0, 0,\n    0, 0, 1, 0,\n    0, 0, 0, 1\n  ], this._values))\n}\nDOMMatrix.prototype.flipY = function () {\n  return newInstance(multiply([\n    1, 0, 0, 0,\n    0, -1, 0, 0,\n    0, 0, 1, 0,\n    0, 0, 0, 1\n  ], this._values))\n}\n\nDOMMatrix.prototype.inverse = function () {\n  return newInstance(this._values).invertSelf()\n}\nDOMMatrix.prototype.invertSelf = function () {\n  // If not invertible, set all attributes to NaN and is2D to false\n  throw new Error('Not implemented')\n}\n\nDOMMatrix.prototype.setMatrixValue = function (transformList) {\n  var temp = new DOMMatrix(transformList)\n  this._values = temp._values\n  this._is2D = temp._is2D\n  return this\n}\n\nDOMMatrix.prototype.transformPoint = function (point) {\n  point = new DOMPoint(point)\n  var x = point.x\n  var y = point.y\n  var z = point.z\n  var w = point.w\n  var values = this._values\n  var nx = values[M11] * x + values[M21] * y + values[M31] * z + values[M41] * w\n  var ny = values[M12] * x + values[M22] * y + values[M32] * z + values[M42] * w\n  var nz = values[M13] * x + values[M23] * y + values[M33] * z + values[M43] * w\n  var nw = values[M14] * x + values[M24] * y + values[M34] * z + values[M44] * w\n  return new DOMPoint(nx, ny, nz, nw)\n}\n\nDOMMatrix.prototype.toFloat32Array = function () { \n  return Float32Array.from(this._values)\n}\n\nDOMMatrix.prototype.toFloat64Array = function () { \n  return this._values.slice(0)\n}\n\nmodule.exports = {DOMMatrix, DOMPoint}\n\n\n//# sourceURL=webpack:///./node_modules/canvas/lib/DOMMatrix.js?");

/***/ }),

/***/ "./node_modules/canvas/lib/bindings.js":
/*!*********************************************!*\
  !*** ./node_modules/canvas/lib/bindings.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nmodule.exports = __webpack_require__(/*! ../build/Release/canvas.node */ \"./node_modules/canvas/build/Release/canvas.node\");\n\n\n//# sourceURL=webpack:///./node_modules/canvas/lib/bindings.js?");

/***/ }),

/***/ "./node_modules/canvas/lib/canvas.js":
/*!*******************************************!*\
  !*** ./node_modules/canvas/lib/canvas.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\n/*!\n * Canvas\n * Copyright (c) 2010 LearnBoost <tj@learnboost.com>\n * MIT Licensed\n */\n\nconst bindings = __webpack_require__(/*! ./bindings */ \"./node_modules/canvas/lib/bindings.js\")\nconst Canvas = module.exports = bindings.Canvas\nconst Context2d = __webpack_require__(/*! ./context2d */ \"./node_modules/canvas/lib/context2d.js\")\nconst PNGStream = __webpack_require__(/*! ./pngstream */ \"./node_modules/canvas/lib/pngstream.js\")\nconst PDFStream = __webpack_require__(/*! ./pdfstream */ \"./node_modules/canvas/lib/pdfstream.js\")\nconst JPEGStream = __webpack_require__(/*! ./jpegstream */ \"./node_modules/canvas/lib/jpegstream.js\")\nconst FORMATS = ['image/png', 'image/jpeg']\nconst util = __webpack_require__(/*! util */ \"util\")\n\n// TODO || is for Node.js pre-v6.6.0\nCanvas.prototype[util.inspect.custom || 'inspect'] = function () {\n  return `[Canvas ${this.width}x${this.height}]`\n}\n\nCanvas.prototype.getContext = function (contextType, contextAttributes) {\n  if ('2d' == contextType) {\n    var ctx = this._context2d || (this._context2d = new Context2d(this, contextAttributes));\n    this.context = ctx;\n    ctx.canvas = this;\n    return ctx;\n  }\n};\n\nCanvas.prototype.pngStream =\nCanvas.prototype.createPNGStream = function(options){\n  return new PNGStream(this, options);\n};\n\nCanvas.prototype.pdfStream =\nCanvas.prototype.createPDFStream = function(options){\n  return new PDFStream(this, options);\n};\n\nCanvas.prototype.jpegStream =\nCanvas.prototype.createJPEGStream = function(options){\n  return new JPEGStream(this, options);\n};\n\nCanvas.prototype.toDataURL = function(a1, a2, a3){\n  // valid arg patterns (args -> [type, opts, fn]):\n  // [] -> ['image/png', null, null]\n  // [qual] -> ['image/png', null, null]\n  // [undefined] -> ['image/png', null, null]\n  // ['image/png'] -> ['image/png', null, null]\n  // ['image/png', qual] -> ['image/png', null, null]\n  // [fn] -> ['image/png', null, fn]\n  // [type, fn] -> [type, null, fn]\n  // [undefined, fn] -> ['image/png', null, fn]\n  // ['image/png', qual, fn] -> ['image/png', null, fn]\n  // ['image/jpeg', fn] -> ['image/jpeg', null, fn]\n  // ['image/jpeg', opts, fn] -> ['image/jpeg', opts, fn]\n  // ['image/jpeg', qual, fn] -> ['image/jpeg', {quality: qual}, fn]\n  // ['image/jpeg', undefined, fn] -> ['image/jpeg', null, fn]\n  // ['image/jpeg'] -> ['image/jpeg', null, fn]\n  // ['image/jpeg', opts] -> ['image/jpeg', opts, fn]\n  // ['image/jpeg', qual] -> ['image/jpeg', {quality: qual}, fn]\n\n  var type = 'image/png';\n  var opts = {};\n  var fn;\n\n  if ('function' === typeof a1) {\n    fn = a1;\n  } else {\n    if ('string' === typeof a1 && FORMATS.includes(a1.toLowerCase())) {\n      type = a1.toLowerCase();\n    }\n\n    if ('function' === typeof a2) {\n      fn = a2;\n    } else {\n      if ('object' === typeof a2) {\n        opts = a2;\n      } else if ('number' === typeof a2) {\n        opts = {quality: Math.max(0, Math.min(1, a2))};\n      }\n\n      if ('function' === typeof a3) {\n        fn = a3;\n      } else if (undefined !== a3) {\n        throw new TypeError(typeof a3 + ' is not a function');\n      }\n    }\n  }\n\n  if (this.width === 0 || this.height === 0) {\n    // Per spec, if the bitmap has no pixels, return this string:\n    var str = \"data:,\";\n    if (fn) {\n      setTimeout(() => fn(null, str));\n      return;\n    } else {\n      return str;\n    }\n  }\n\n  if (fn) {\n    this.toBuffer((err, buf) => {\n      if (err) return fn(err);\n      fn(null, `data:${type};base64,${buf.toString('base64')}`);\n    }, type, opts)\n  } else {\n    return `data:${type};base64,${this.toBuffer(type, opts).toString('base64')}`\n  }\n};\n\n\n//# sourceURL=webpack:///./node_modules/canvas/lib/canvas.js?");

/***/ }),

/***/ "./node_modules/canvas/lib/context2d.js":
/*!**********************************************!*\
  !*** ./node_modules/canvas/lib/context2d.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\n/*!\n * Canvas - Context2d\n * Copyright (c) 2010 LearnBoost <tj@learnboost.com>\n * MIT Licensed\n */\n\nconst bindings = __webpack_require__(/*! ./bindings */ \"./node_modules/canvas/lib/bindings.js\")\nconst parseFont = __webpack_require__(/*! ./parse-font */ \"./node_modules/canvas/lib/parse-font.js\")\nconst { DOMMatrix } = __webpack_require__(/*! ./DOMMatrix */ \"./node_modules/canvas/lib/DOMMatrix.js\")\n\nbindings.CanvasRenderingContext2dInit(DOMMatrix, parseFont)\nmodule.exports = bindings.CanvasRenderingContext2d\n\n\n//# sourceURL=webpack:///./node_modules/canvas/lib/context2d.js?");

/***/ }),

/***/ "./node_modules/canvas/lib/image.js":
/*!******************************************!*\
  !*** ./node_modules/canvas/lib/image.js ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\n/*!\n * Canvas - Image\n * Copyright (c) 2010 LearnBoost <tj@learnboost.com>\n * MIT Licensed\n */\n\n/**\n * Module dependencies.\n */\n\nconst bindings = __webpack_require__(/*! ./bindings */ \"./node_modules/canvas/lib/bindings.js\")\nconst Image = module.exports = bindings.Image\nconst util = __webpack_require__(/*! util */ \"util\")\n\n// Lazily loaded simple-get\nlet get;\n\nconst {GetSource, SetSource} = bindings;\n\nObject.defineProperty(Image.prototype, 'src', {\n  /**\n   * src setter. Valid values:\n   *  * `data:` URI\n   *  * Local file path\n   *  * HTTP or HTTPS URL\n   *  * Buffer containing image data (i.e. not a `data:` URI stored in a Buffer)\n   *\n   * @param {String|Buffer} val filename, buffer, data URI, URL\n   * @api public\n   */\n  set(val) {\n    if (typeof val === 'string') {\n      if (/^\\s*data:/.test(val)) { // data: URI\n        const commaI = val.indexOf(',')\n        // 'base64' must come before the comma\n        const isBase64 = val.lastIndexOf('base64', commaI) !== -1\n        const content = val.slice(commaI + 1)\n        setSource(this, Buffer.from(content, isBase64 ? 'base64' : 'utf8'), val);\n      } else if (/^\\s*https?:\\/\\//.test(val)) { // remote URL\n        const onerror = err => {\n          if (typeof this.onerror === 'function') {\n            this.onerror(err)\n          } else {\n            throw err\n          }\n        }\n\n        if (!get) get = __webpack_require__(/*! simple-get */ \"./node_modules/simple-get/index.js\");\n\n        get.concat(val, (err, res, data) => {\n          if (err) return onerror(err)\n\n          if (res.statusCode < 200 || res.statusCode >= 300) {\n            return onerror(new Error(`Server responded with ${res.statusCode}`))\n          }\n\n          setSource(this, data)\n        })\n      } else { // local file path assumed\n        setSource(this, val);\n      }\n    } else if (Buffer.isBuffer(val)) {\n      setSource(this, val);\n    }\n  },\n\n  get() {\n    // TODO https://github.com/Automattic/node-canvas/issues/118\n    return getSource(this);\n  },\n\n  configurable: true\n});\n\n// TODO || is for Node.js pre-v6.6.0\nImage.prototype[util.inspect.custom || 'inspect'] = function(){\n  return '[Image'\n    + (this.complete ? ':' + this.width + 'x' + this.height : '')\n    + (this.src ? ' ' + this.src : '')\n    + (this.complete ? ' complete' : '')\n    + ']';\n};\n\nfunction getSource(img){\n  return img._originalSource || GetSource.call(img);\n}\n\nfunction setSource(img, src, origSrc){\n  SetSource.call(img, src);\n  img._originalSource = origSrc;\n}\n\n\n//# sourceURL=webpack:///./node_modules/canvas/lib/image.js?");

/***/ }),

/***/ "./node_modules/canvas/lib/jpegstream.js":
/*!***********************************************!*\
  !*** ./node_modules/canvas/lib/jpegstream.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\n/*!\n * Canvas - JPEGStream\n * Copyright (c) 2010 LearnBoost <tj@learnboost.com>\n * MIT Licensed\n */\n\nvar Readable = __webpack_require__(/*! stream */ \"stream\").Readable;\nvar util = __webpack_require__(/*! util */ \"util\");\n\nvar JPEGStream = module.exports = function JPEGStream(canvas, options) {\n  if (!(this instanceof JPEGStream)) {\n    throw new TypeError(\"Class constructors cannot be invoked without 'new'\");\n  }\n\n  if (canvas.streamJPEGSync === undefined) {\n    throw new Error(\"node-canvas was built without JPEG support.\");\n  }\n\n  Readable.call(this);\n\n  this.options = options;\n  this.canvas = canvas;\n};\n\nutil.inherits(JPEGStream, Readable);\n\nfunction noop() {}\n\nJPEGStream.prototype._read = function _read() {\n  // For now we're not controlling the c++ code's data emission, so we only\n  // call canvas.streamJPEGSync once and let it emit data at will.\n  this._read = noop;\n  var self = this;\n  self.canvas.streamJPEGSync(this.options, function(err, chunk){\n    if (err) {\n      self.emit('error', err);\n    } else if (chunk) {\n      self.push(chunk);\n    } else {\n      self.push(null);\n    }\n  });\n};\n\n\n//# sourceURL=webpack:///./node_modules/canvas/lib/jpegstream.js?");

/***/ }),

/***/ "./node_modules/canvas/lib/parse-font.js":
/*!***********************************************!*\
  !*** ./node_modules/canvas/lib/parse-font.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\n/**\n * Font RegExp helpers.\n */\n\nconst weights = 'bold|bolder|lighter|[1-9]00'\n  , styles = 'italic|oblique'\n  , variants = 'small-caps'\n  , stretches = 'ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded'\n  , units = 'px|pt|pc|in|cm|mm|%|em|ex|ch|rem|q'\n  , string = '\\'([^\\']+)\\'|\"([^\"]+)\"|[\\\\w\\\\s-]+'\n\n// [ [ <‘font-style’> || <font-variant-css21> || <‘font-weight’> || <‘font-stretch’> ]?\n//    <‘font-size’> [ / <‘line-height’> ]? <‘font-family’> ]\n// https://drafts.csswg.org/css-fonts-3/#font-prop\nconst weightRe = new RegExp('(' + weights + ') +', 'i')\nconst styleRe = new RegExp('(' + styles + ') +', 'i')\nconst variantRe = new RegExp('(' + variants + ') +', 'i')\nconst stretchRe = new RegExp('(' + stretches + ') +', 'i')\nconst sizeFamilyRe = new RegExp(\n  '([\\\\d\\\\.]+)(' + units + ') *'\n  + '((?:' + string + ')( *, *(?:' + string + '))*)')\n\n/**\n * Cache font parsing.\n */\n\nconst cache = {}\n\nconst defaultHeight = 16 // pt, common browser default\n\n/**\n * Parse font `str`.\n *\n * @param {String} str\n * @return {Object} Parsed font. `size` is in device units. `unit` is the unit\n *   appearing in the input string.\n * @api private\n */\n\nmodule.exports = function (str) {\n  // Cached\n  if (cache[str]) return cache[str]\n\n  // Try for required properties first.\n  const sizeFamily = sizeFamilyRe.exec(str)\n  if (!sizeFamily) return // invalid\n\n  // Default values and required properties\n  const font = {\n    weight: 'normal',\n    style: 'normal',\n    stretch: 'normal',\n    variant: 'normal',\n    size: parseFloat(sizeFamily[1]),\n    unit: sizeFamily[2],\n    family: sizeFamily[3].replace(/[\"']/g, '').replace(/ *, */g, ',')\n  }\n\n  // Optional, unordered properties.\n  let weight, style, variant, stretch\n  // Stop search at `sizeFamily.index`\n  let substr = str.substring(0, sizeFamily.index)\n  if ((weight = weightRe.exec(substr))) font.weight = weight[1]\n  if ((style = styleRe.exec(substr))) font.style = style[1]\n  if ((variant = variantRe.exec(substr))) font.variant = variant[1]\n  if ((stretch = stretchRe.exec(substr))) font.stretch = stretch[1]\n\n  // Convert to device units. (`font.unit` is the original unit)\n  // TODO: ch, ex\n  switch (font.unit) {\n    case 'pt':\n      font.size /= 0.75\n      break\n    case 'pc':\n      font.size *= 16\n      break\n    case 'in':\n      font.size *= 96\n      break\n    case 'cm':\n      font.size *= 96.0 / 2.54\n      break\n    case 'mm':\n      font.size *= 96.0 / 25.4\n      break\n    case '%':\n      // TODO disabled because existing unit tests assume 100\n      // font.size *= defaultHeight / 100 / 0.75\n      break\n    case 'em':\n    case 'rem':\n      font.size *= defaultHeight / 0.75\n      break\n    case 'q':\n      font.size *= 96 / 25.4 / 4\n      break\n  }\n\n  return (cache[str] = font)\n}\n\n\n//# sourceURL=webpack:///./node_modules/canvas/lib/parse-font.js?");

/***/ }),

/***/ "./node_modules/canvas/lib/pdfstream.js":
/*!**********************************************!*\
  !*** ./node_modules/canvas/lib/pdfstream.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\n/*!\n * Canvas - PDFStream\n */\n\nvar Readable = __webpack_require__(/*! stream */ \"stream\").Readable;\nvar util = __webpack_require__(/*! util */ \"util\");\n\nvar PDFStream = module.exports = function PDFStream(canvas, options) {\n  if (!(this instanceof PDFStream)) {\n    throw new TypeError(\"Class constructors cannot be invoked without 'new'\");\n  }\n\n  Readable.call(this);\n\n  this.canvas = canvas;\n  this.options = options;\n};\n\nutil.inherits(PDFStream, Readable);\n\nfunction noop() {}\n\nPDFStream.prototype._read = function _read() {\n  // For now we're not controlling the c++ code's data emission, so we only\n  // call canvas.streamPDFSync once and let it emit data at will.\n  this._read = noop;\n  var self = this;\n  self.canvas.streamPDFSync(function(err, chunk, len){\n    if (err) {\n      self.emit('error', err);\n    } else if (len) {\n      self.push(chunk);\n    } else {\n      self.push(null);\n    }\n  }, this.options);\n};\n\n\n//# sourceURL=webpack:///./node_modules/canvas/lib/pdfstream.js?");

/***/ }),

/***/ "./node_modules/canvas/lib/pngstream.js":
/*!**********************************************!*\
  !*** ./node_modules/canvas/lib/pngstream.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\n/*!\n * Canvas - PNGStream\n * Copyright (c) 2010 LearnBoost <tj@learnboost.com>\n * MIT Licensed\n */\n\nvar Readable = __webpack_require__(/*! stream */ \"stream\").Readable;\nvar util = __webpack_require__(/*! util */ \"util\");\n\nvar PNGStream = module.exports = function PNGStream(canvas, options) {\n  if (!(this instanceof PNGStream)) {\n    throw new TypeError(\"Class constructors cannot be invoked without 'new'\");\n  }\n\n  Readable.call(this);\n\n  if (options &&\n    options.palette instanceof Uint8ClampedArray &&\n    options.palette.length % 4 !== 0) {\n    throw new Error(\"Palette length must be a multiple of 4.\");\n  }\n  this.canvas = canvas;\n  this.options = options || {};\n};\n\nutil.inherits(PNGStream, Readable);\n\nfunction noop() {}\n\nPNGStream.prototype._read = function _read() {\n  // For now we're not controlling the c++ code's data emission, so we only\n  // call canvas.streamPNGSync once and let it emit data at will.\n  this._read = noop;\n  var self = this;\n  self.canvas.streamPNGSync(function(err, chunk, len){\n    if (err) {\n      self.emit('error', err);\n    } else if (len) {\n      self.push(chunk);\n    } else {\n      self.push(null);\n    }\n  }, self.options);\n};\n\n\n//# sourceURL=webpack:///./node_modules/canvas/lib/pngstream.js?");

/***/ }),

/***/ "./node_modules/canvas/package.json":
/*!******************************************!*\
  !*** ./node_modules/canvas/package.json ***!
  \******************************************/
/*! exports provided: _from, _id, _inBundle, _integrity, _location, _phantomChildren, _requested, _requiredBy, _resolved, _shasum, _spec, _where, author, binary, browser, bugs, bundleDependencies, contributors, dependencies, deprecated, description, devDependencies, engines, files, homepage, keywords, license, main, name, repository, scripts, types, version, default */
/***/ (function(module) {

eval("module.exports = JSON.parse(\"{\\\"_from\\\":\\\"canvas\\\",\\\"_id\\\":\\\"canvas@2.6.1\\\",\\\"_inBundle\\\":false,\\\"_integrity\\\":\\\"sha512-S98rKsPcuhfTcYbtF53UIJhcbgIAK533d1kJKMwsMwAIFgfd58MOyxRud3kktlzWiEkFliaJtvyZCBtud/XVEA==\\\",\\\"_location\\\":\\\"/canvas\\\",\\\"_phantomChildren\\\":{},\\\"_requested\\\":{\\\"type\\\":\\\"tag\\\",\\\"registry\\\":true,\\\"raw\\\":\\\"canvas\\\",\\\"name\\\":\\\"canvas\\\",\\\"escapedName\\\":\\\"canvas\\\",\\\"rawSpec\\\":\\\"\\\",\\\"saveSpec\\\":null,\\\"fetchSpec\\\":\\\"latest\\\"},\\\"_requiredBy\\\":[\\\"#USER\\\",\\\"/\\\"],\\\"_resolved\\\":\\\"https://registry.npmjs.org/canvas/-/canvas-2.6.1.tgz\\\",\\\"_shasum\\\":\\\"0d087dd4d60f5a5a9efa202757270abea8bef89e\\\",\\\"_spec\\\":\\\"canvas\\\",\\\"_where\\\":\\\"/Users/guoxiaodong/Documents/App/@github/mcanvas\\\",\\\"author\\\":{\\\"name\\\":\\\"TJ Holowaychuk\\\",\\\"email\\\":\\\"tj@learnboost.com\\\"},\\\"binary\\\":{\\\"module_name\\\":\\\"canvas\\\",\\\"module_path\\\":\\\"build/Release\\\",\\\"host\\\":\\\"https://github.com/node-gfx/node-canvas-prebuilt/releases/download/\\\",\\\"remote_path\\\":\\\"v{version}\\\",\\\"package_name\\\":\\\"{module_name}-v{version}-{node_abi}-{platform}-{libc}-{arch}.tar.gz\\\"},\\\"browser\\\":\\\"browser.js\\\",\\\"bugs\\\":{\\\"url\\\":\\\"https://github.com/Automattic/node-canvas/issues\\\"},\\\"bundleDependencies\\\":false,\\\"contributors\\\":[{\\\"name\\\":\\\"Nathan Rajlich\\\",\\\"email\\\":\\\"nathan@tootallnate.net\\\"},{\\\"name\\\":\\\"Rod Vagg\\\",\\\"email\\\":\\\"r@va.gg\\\"},{\\\"name\\\":\\\"Juriy Zaytsev\\\",\\\"email\\\":\\\"kangax@gmail.com\\\"}],\\\"dependencies\\\":{\\\"nan\\\":\\\"^2.14.0\\\",\\\"node-pre-gyp\\\":\\\"^0.11.0\\\",\\\"simple-get\\\":\\\"^3.0.3\\\"},\\\"deprecated\\\":false,\\\"description\\\":\\\"Canvas graphics API backed by Cairo\\\",\\\"devDependencies\\\":{\\\"@types/node\\\":\\\"^10.12.18\\\",\\\"assert-rejects\\\":\\\"^1.0.0\\\",\\\"dtslint\\\":\\\"^0.5.3\\\",\\\"express\\\":\\\"^4.16.3\\\",\\\"mocha\\\":\\\"^5.2.0\\\",\\\"pixelmatch\\\":\\\"^4.0.2\\\",\\\"standard\\\":\\\"^12.0.1\\\"},\\\"engines\\\":{\\\"node\\\":\\\">=6\\\"},\\\"files\\\":[\\\"binding.gyp\\\",\\\"lib/\\\",\\\"src/\\\",\\\"util/\\\",\\\"types/index.d.ts\\\"],\\\"homepage\\\":\\\"https://github.com/Automattic/node-canvas\\\",\\\"keywords\\\":[\\\"canvas\\\",\\\"graphic\\\",\\\"graphics\\\",\\\"pixman\\\",\\\"cairo\\\",\\\"image\\\",\\\"images\\\",\\\"pdf\\\"],\\\"license\\\":\\\"MIT\\\",\\\"main\\\":\\\"index.js\\\",\\\"name\\\":\\\"canvas\\\",\\\"repository\\\":{\\\"type\\\":\\\"git\\\",\\\"url\\\":\\\"git://github.com/Automattic/node-canvas.git\\\"},\\\"scripts\\\":{\\\"benchmark\\\":\\\"node benchmarks/run.js\\\",\\\"dtslint\\\":\\\"dtslint types\\\",\\\"install\\\":\\\"node-pre-gyp install --fallback-to-build\\\",\\\"prebenchmark\\\":\\\"node-gyp build\\\",\\\"pretest\\\":\\\"standard examples/*.js test/server.js test/public/*.js benchmarks/run.js lib/context2d.js util/has_lib.js browser.js index.js && node-gyp build\\\",\\\"pretest-server\\\":\\\"node-gyp build\\\",\\\"test\\\":\\\"mocha test/*.test.js\\\",\\\"test-server\\\":\\\"node test/server.js\\\"},\\\"types\\\":\\\"types/index.d.ts\\\",\\\"version\\\":\\\"2.6.1\\\"}\");\n\n//# sourceURL=webpack:///./node_modules/canvas/package.json?");

/***/ }),

/***/ "./node_modules/once/once.js":
/*!***********************************!*\
  !*** ./node_modules/once/once.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var wrappy = __webpack_require__(/*! wrappy */ \"./node_modules/wrappy/wrappy.js\")\nmodule.exports = wrappy(once)\nmodule.exports.strict = wrappy(onceStrict)\n\nonce.proto = once(function () {\n  Object.defineProperty(Function.prototype, 'once', {\n    value: function () {\n      return once(this)\n    },\n    configurable: true\n  })\n\n  Object.defineProperty(Function.prototype, 'onceStrict', {\n    value: function () {\n      return onceStrict(this)\n    },\n    configurable: true\n  })\n})\n\nfunction once (fn) {\n  var f = function () {\n    if (f.called) return f.value\n    f.called = true\n    return f.value = fn.apply(this, arguments)\n  }\n  f.called = false\n  return f\n}\n\nfunction onceStrict (fn) {\n  var f = function () {\n    if (f.called)\n      throw new Error(f.onceError)\n    f.called = true\n    return f.value = fn.apply(this, arguments)\n  }\n  var name = fn.name || 'Function wrapped with `once`'\n  f.onceError = name + \" shouldn't be called more than once\"\n  f.called = false\n  return f\n}\n\n\n//# sourceURL=webpack:///./node_modules/once/once.js?");

/***/ }),

/***/ "./node_modules/simple-concat/index.js":
/*!*********************************************!*\
  !*** ./node_modules/simple-concat/index.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = function (stream, cb) {\n  var chunks = []\n  stream.on('data', function (chunk) {\n    chunks.push(chunk)\n  })\n  stream.once('end', function () {\n    if (cb) cb(null, Buffer.concat(chunks))\n    cb = null\n  })\n  stream.once('error', function (err) {\n    if (cb) cb(err)\n    cb = null\n  })\n}\n\n\n//# sourceURL=webpack:///./node_modules/simple-concat/index.js?");

/***/ }),

/***/ "./node_modules/simple-get/index.js":
/*!******************************************!*\
  !*** ./node_modules/simple-get/index.js ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = simpleGet\n\nconst concat = __webpack_require__(/*! simple-concat */ \"./node_modules/simple-concat/index.js\")\nconst decompressResponse = __webpack_require__(/*! decompress-response */ \"./node_modules/simple-get/node_modules/decompress-response/index.js\") // excluded from browser build\nconst http = __webpack_require__(/*! http */ \"http\")\nconst https = __webpack_require__(/*! https */ \"https\")\nconst once = __webpack_require__(/*! once */ \"./node_modules/once/once.js\")\nconst querystring = __webpack_require__(/*! querystring */ \"querystring\")\nconst url = __webpack_require__(/*! url */ \"url\")\n\nconst isStream = o => o !== null && typeof o === 'object' && typeof o.pipe === 'function'\n\nfunction simpleGet (opts, cb) {\n  opts = Object.assign({ maxRedirects: 10 }, typeof opts === 'string' ? { url: opts } : opts)\n  cb = once(cb)\n\n  if (opts.url) {\n    const { hostname, port, protocol, auth, path } = url.parse(opts.url) // eslint-disable-line node/no-deprecated-api\n    delete opts.url\n    if (!hostname && !port && !protocol && !auth) opts.path = path // Relative redirect\n    else Object.assign(opts, { hostname, port, protocol, auth, path }) // Absolute redirect\n  }\n\n  const headers = { 'accept-encoding': 'gzip, deflate' }\n  if (opts.headers) Object.keys(opts.headers).forEach(k => (headers[k.toLowerCase()] = opts.headers[k]))\n  opts.headers = headers\n\n  let body\n  if (opts.body) {\n    body = opts.json && !isStream(opts.body) ? JSON.stringify(opts.body) : opts.body\n  } else if (opts.form) {\n    body = typeof opts.form === 'string' ? opts.form : querystring.stringify(opts.form)\n    opts.headers['content-type'] = 'application/x-www-form-urlencoded'\n  }\n\n  if (body) {\n    if (!opts.method) opts.method = 'POST'\n    if (!isStream(body)) opts.headers['content-length'] = Buffer.byteLength(body)\n    if (opts.json && !opts.form) opts.headers['content-type'] = 'application/json'\n  }\n  delete opts.body; delete opts.form\n\n  if (opts.json) opts.headers.accept = 'application/json'\n  if (opts.method) opts.method = opts.method.toUpperCase()\n\n  const protocol = opts.protocol === 'https:' ? https : http // Support http/https urls\n  const req = protocol.request(opts, res => {\n    if (opts.followRedirects !== false && res.statusCode >= 300 && res.statusCode < 400 && res.headers.location) {\n      opts.url = res.headers.location // Follow 3xx redirects\n      delete opts.headers.host // Discard `host` header on redirect (see #32)\n      res.resume() // Discard response\n\n      if (opts.method === 'POST' && [301, 302].includes(res.statusCode)) {\n        opts.method = 'GET' // On 301/302 redirect, change POST to GET (see #35)\n        delete opts.headers['content-length']; delete opts.headers['content-type']\n      }\n\n      if (opts.maxRedirects-- === 0) return cb(new Error('too many redirects'))\n      else return simpleGet(opts, cb)\n    }\n\n    const tryUnzip = typeof decompressResponse === 'function' && opts.method !== 'HEAD'\n    cb(null, tryUnzip ? decompressResponse(res) : res)\n  })\n  req.on('timeout', () => {\n    req.abort()\n    cb(new Error('Request timed out'))\n  })\n  req.on('error', cb)\n\n  if (isStream(body)) body.on('error', cb).pipe(req)\n  else req.end(body)\n\n  return req\n}\n\nsimpleGet.concat = (opts, cb) => {\n  return simpleGet(opts, (err, res) => {\n    if (err) return cb(err)\n    concat(res, (err, data) => {\n      if (err) return cb(err)\n      if (opts.json) {\n        try {\n          data = JSON.parse(data.toString())\n        } catch (err) {\n          return cb(err, res, data)\n        }\n      }\n      cb(null, res, data)\n    })\n  })\n}\n\n;['get', 'post', 'put', 'patch', 'head', 'delete'].forEach(method => {\n  simpleGet[method] = (opts, cb) => {\n    if (typeof opts === 'string') opts = { url: opts }\n    return simpleGet(Object.assign({ method: method.toUpperCase() }, opts), cb)\n  }\n})\n\n\n//# sourceURL=webpack:///./node_modules/simple-get/index.js?");

/***/ }),

/***/ "./node_modules/simple-get/node_modules/decompress-response/index.js":
/*!***************************************************************************!*\
  !*** ./node_modules/simple-get/node_modules/decompress-response/index.js ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nconst {PassThrough: PassThroughStream} = __webpack_require__(/*! stream */ \"stream\");\nconst zlib = __webpack_require__(/*! zlib */ \"zlib\");\nconst mimicResponse = __webpack_require__(/*! mimic-response */ \"./node_modules/simple-get/node_modules/mimic-response/index.js\");\n\nconst decompressResponse = response => {\n\tconst contentEncoding = (response.headers['content-encoding'] || '').toLowerCase();\n\n\tif (!['gzip', 'deflate', 'br'].includes(contentEncoding)) {\n\t\treturn response;\n\t}\n\n\tconst isBrotli = contentEncoding === 'br';\n\tif (isBrotli && typeof zlib.createBrotliDecompress !== 'function') {\n\t\treturn response;\n\t}\n\n\tconst decompress = isBrotli ? zlib.createBrotliDecompress() : zlib.createUnzip();\n\tconst stream = new PassThroughStream();\n\n\tmimicResponse(response, stream);\n\n\tdecompress.on('error', error => {\n\t\t// Ignore empty response\n\t\tif (error.code === 'Z_BUF_ERROR') {\n\t\t\tstream.end();\n\t\t\treturn;\n\t\t}\n\n\t\tstream.emit('error', error);\n\t});\n\n\tresponse.pipe(decompress).pipe(stream);\n\n\treturn stream;\n};\n\nmodule.exports = decompressResponse;\n// TODO: remove this in the next major version\nmodule.exports.default = decompressResponse;\n\n\n//# sourceURL=webpack:///./node_modules/simple-get/node_modules/decompress-response/index.js?");

/***/ }),

/***/ "./node_modules/simple-get/node_modules/mimic-response/index.js":
/*!**********************************************************************!*\
  !*** ./node_modules/simple-get/node_modules/mimic-response/index.js ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\n// We define these manually to ensure they're always copied\n// even if they would move up the prototype chain\n// https://nodejs.org/api/http.html#http_class_http_incomingmessage\nconst knownProperties = [\n\t'aborted',\n\t'complete',\n\t'destroy',\n\t'headers',\n\t'httpVersion',\n\t'httpVersionMinor',\n\t'httpVersionMajor',\n\t'method',\n\t'rawHeaders',\n\t'rawTrailers',\n\t'setTimeout',\n\t'socket',\n\t'statusCode',\n\t'statusMessage',\n\t'trailers',\n\t'url'\n];\n\nmodule.exports = (fromStream, toStream) => {\n\tconst fromProperties = new Set(Object.keys(fromStream).concat(knownProperties));\n\n\tfor (const property of fromProperties) {\n\t\t// Don't overwrite existing properties.\n\t\tif (property in toStream) {\n\t\t\tcontinue;\n\t\t}\n\n\t\ttoStream[property] = typeof fromStream[property] === 'function' ? fromStream[property].bind(fromStream) : fromStream[property];\n\t}\n\n\treturn toStream;\n};\n\n\n//# sourceURL=webpack:///./node_modules/simple-get/node_modules/mimic-response/index.js?");

/***/ }),

/***/ "./node_modules/tslib/tslib.es6.js":
/*!*****************************************!*\
  !*** ./node_modules/tslib/tslib.es6.js ***!
  \*****************************************/
/*! exports provided: __extends, __assign, __rest, __decorate, __param, __metadata, __awaiter, __generator, __createBinding, __exportStar, __values, __read, __spread, __spreadArrays, __await, __asyncGenerator, __asyncDelegator, __asyncValues, __makeTemplateObject, __importStar, __importDefault, __classPrivateFieldGet, __classPrivateFieldSet */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__extends\", function() { return __extends; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__assign\", function() { return __assign; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__rest\", function() { return __rest; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__decorate\", function() { return __decorate; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__param\", function() { return __param; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__metadata\", function() { return __metadata; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__awaiter\", function() { return __awaiter; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__generator\", function() { return __generator; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__createBinding\", function() { return __createBinding; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__exportStar\", function() { return __exportStar; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__values\", function() { return __values; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__read\", function() { return __read; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__spread\", function() { return __spread; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__spreadArrays\", function() { return __spreadArrays; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__await\", function() { return __await; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__asyncGenerator\", function() { return __asyncGenerator; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__asyncDelegator\", function() { return __asyncDelegator; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__asyncValues\", function() { return __asyncValues; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__makeTemplateObject\", function() { return __makeTemplateObject; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__importStar\", function() { return __importStar; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__importDefault\", function() { return __importDefault; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__classPrivateFieldGet\", function() { return __classPrivateFieldGet; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__classPrivateFieldSet\", function() { return __classPrivateFieldSet; });\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nfunction __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nfunction __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nconst __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nfunction __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\r\n}\r\n\r\nfunction __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nfunction __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nfunction __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nfunction __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nfunction __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nfunction __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nfunction __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nfunction __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nfunction __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nconst __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nfunction __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nfunction __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nfunction __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nfunction __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n\n\n//# sourceURL=webpack:///./node_modules/tslib/tslib.es6.js?");

/***/ }),

/***/ "./node_modules/webpack/buildin/module.js":
/*!***********************************!*\
  !*** (webpack)/buildin/module.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n\n\n//# sourceURL=webpack:///(webpack)/buildin/module.js?");

/***/ }),

/***/ "./node_modules/wrappy/wrappy.js":
/*!***************************************!*\
  !*** ./node_modules/wrappy/wrappy.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("// Returns a wrapper function that returns a wrapped callback\n// The wrapper function should do some stuff, and return a\n// presumably different callback function.\n// This makes sure that own properties are retained, so that\n// decorations and such are not lost along the way.\nmodule.exports = wrappy\nfunction wrappy (fn, cb) {\n  if (fn && cb) return wrappy(fn)(cb)\n\n  if (typeof fn !== 'function')\n    throw new TypeError('need wrapper function')\n\n  Object.keys(fn).forEach(function (k) {\n    wrapper[k] = fn[k]\n  })\n\n  return wrapper\n\n  function wrapper() {\n    var args = new Array(arguments.length)\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i]\n    }\n    var ret = fn.apply(this, args)\n    var cb = args[args.length-1]\n    if (typeof ret === 'function' && ret !== cb) {\n      Object.keys(cb).forEach(function (k) {\n        ret[k] = cb[k]\n      })\n    }\n    return ret\n  }\n}\n\n\n//# sourceURL=webpack:///./node_modules/wrappy/wrappy.js?");

/***/ }),

/***/ "./src/canvas/index.ts":
/*!*****************************!*\
  !*** ./src/canvas/index.ts ***!
  \*****************************/
/*! exports provided: Canvas */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Canvas\", function() { return Canvas; });\nvar Canvas =  true ?\n    __webpack_require__(/*! ./node */ \"./src/canvas/node.ts\")._Canvas :\n    undefined;\n\n\n//# sourceURL=webpack:///./src/canvas/index.ts?");

/***/ }),

/***/ "./src/canvas/node.ts":
/*!****************************!*\
  !*** ./src/canvas/node.ts ***!
  \****************************/
/*! exports provided: _Canvas */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"_Canvas\", function() { return _Canvas; });\n/* harmony import */ var canvas__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! canvas */ \"./node_modules/canvas/index.js\");\n/* harmony import */ var canvas__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(canvas__WEBPACK_IMPORTED_MODULE_0__);\n\nvar _Canvas = {\n    name: 'NodeCanvas',\n    create: function (width, height) {\n        if (width === void 0) { width = 500; }\n        if (height === void 0) { height = 500; }\n        var cvs = Object(canvas__WEBPACK_IMPORTED_MODULE_0__[\"createCanvas\"])(width, height);\n        var ctx = cvs.getContext('2d');\n        return [cvs, ctx];\n    },\n    loadImage: function (image, loaded, error) {\n        Object(canvas__WEBPACK_IMPORTED_MODULE_0__[\"loadImage\"])(image).then(loaded).catch(error);\n    },\n};\n\n\n//# sourceURL=webpack:///./src/canvas/node.ts?");

/***/ }),

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/*! exports provided: MCompose, MImage, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _modules_mcompose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./modules/mcompose */ \"./src/modules/mcompose.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"MCompose\", function() { return _modules_mcompose__WEBPACK_IMPORTED_MODULE_0__[\"MCompose\"]; });\n\n/* harmony import */ var _modules_mimage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./modules/mimage */ \"./src/modules/mimage.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"MImage\", function() { return _modules_mimage__WEBPACK_IMPORTED_MODULE_1__[\"MImage\"]; });\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (_modules_mcompose__WEBPACK_IMPORTED_MODULE_0__[\"MCompose\"]);\n\n\n//# sourceURL=webpack:///./src/index.ts?");

/***/ }),

/***/ "./src/modules/mcompose.ts":
/*!*********************************!*\
  !*** ./src/modules/mcompose.ts ***!
  \*********************************/
/*! exports provided: MCompose */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MCompose\", function() { return MCompose; });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"./src/utils/index.ts\");\n/* harmony import */ var _Src_canvas__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @Src/canvas */ \"./src/canvas/index.ts\");\n/* harmony import */ var _Src_utils_crop__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @Src/utils/crop */ \"./src/utils/crop.ts\");\n\n\n\nvar MCompose = /** @class */ (function () {\n    function MCompose(options) {\n        if (options === void 0) { options = {}; }\n        // 绘制函数队列；\n        this.queue = [];\n        // 回调函数池；\n        this.fn = {\n            // 最后执行的函数；\n            success: function () { },\n            // 错误回调；\n            error: function (err) { },\n        };\n        this.data = {\n            // 文字id；\n            textId: 0,\n            // 文字绘制数据；\n            text: {},\n            // 背景图数据;\n            bgConfig: null,\n        };\n        // --------------------------------------------------------\n        // 绘制文字部分；\n        // --------------------------------------------------------\n        this._defaultFontFamily = 'helvetica neue,hiragino sans gb,Microsoft YaHei,arial,tahoma,sans-serif';\n        // 配置canvas初始大小；\n        // width：画布宽度，Number,选填，默认为 500;\n        // height: 画布高度，Number，选填，默认与宽度一致；\n        this.ops = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"extend\"])({\n            width: 500,\n            height: 500,\n            backgroundColor: '',\n        }, options);\n        this._init();\n    }\n    MCompose.prototype._init = function () {\n        var _a;\n        var _b = this.ops, width = _b.width, height = _b.height, backgroundColor = _b.backgroundColor;\n        _a = _Src_canvas__WEBPACK_IMPORTED_MODULE_1__[\"Canvas\"].create(width, height), this.cvs = _a[0], this.ctx = _a[1];\n        backgroundColor && this._setBgColor(backgroundColor);\n    };\n    // --------------------------------------------------------\n    // 绘制背景部分；\n    // --------------------------------------------------------\n    MCompose.prototype.background = function (image, bg) {\n        var _this = this;\n        if (bg === void 0) { bg = { type: 'origin' }; }\n        if (!image && !this.data.bgConfig) {\n            Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"throwError\"])('the init background must has a image.');\n            return this;\n        }\n        // 缓存bg options， 用于重置；\n        if (image) {\n            bg.image = image;\n            this.data.bgConfig = bg;\n        }\n        else if (this.data.bgConfig) {\n            bg = this.data.bgConfig;\n        }\n        this.queue.push(function () {\n            if (bg.color)\n                _this._setBgColor(bg.color);\n            Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"getImage\"])(bg.image, function (img) { return _this._background(img, bg); }, _this.fn.error);\n        });\n        return this;\n    };\n    // 设置画布颜色;\n    MCompose.prototype._setBgColor = function (color) {\n        this.ctx.fillStyle = color;\n        this.ctx.fillRect(0, 0, this.cvs.width, this.cvs.height);\n    };\n    MCompose.prototype._getBgAlign = function (left, iw, cw, cropScale) {\n        var rv;\n        if (_utils__WEBPACK_IMPORTED_MODULE_0__[\"is\"].str(left)) {\n            if (left === '50%' || left === 'center') {\n                rv = Math.abs((iw - cw / cropScale) / 2);\n            }\n            else if (left === '100%') {\n                rv = Math.abs(iw - cw / cropScale);\n            }\n            else if (left === '0%') {\n                rv = 0;\n            }\n        }\n        else if (_utils__WEBPACK_IMPORTED_MODULE_0__[\"is\"].num(left)) {\n            rv = left;\n        }\n        else {\n            rv = 0;\n        }\n        return rv;\n    };\n    MCompose.prototype._background = function (img, bg) {\n        var _a = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"getSize\"])(img), iw = _a.iw, ih = _a.ih;\n        // 图片与canvas的长宽比；\n        var iRatio = iw / ih;\n        var cRatio = this.cvs.width / this.cvs.height;\n        // 背景绘制参数；\n        var sx, sy, swidth, sheight, dx, dy, dwidth, dheight;\n        var cropScale;\n        switch (bg.type) {\n            case 'crop':\n                // 裁剪模式，固定canvas大小，原图铺满，超出的部分裁剪；\n                if (iRatio > cRatio) {\n                    swidth = ih * cRatio;\n                    sheight = ih;\n                    cropScale = this.cvs.height / ih;\n                }\n                else {\n                    swidth = iw;\n                    sheight = swidth / cRatio;\n                    cropScale = this.cvs.width / iw;\n                }\n                sx = this._getBgAlign(bg.left, iw, this.cvs.width, cropScale);\n                sy = this._getBgAlign(bg.top, ih, this.cvs.height, cropScale);\n                dy = dx = 0;\n                dheight = this.cvs.height;\n                dwidth = this.cvs.width;\n                break;\n            case 'contain':\n                // 包含模式，固定canvas大小，包含背景图；\n                sy = sx = 0;\n                swidth = iw;\n                sheight = ih;\n                if (iRatio > cRatio) {\n                    dwidth = this.cvs.width;\n                    dheight = dwidth / iRatio;\n                    dx = bg.left || 0;\n                    dy = (bg.top || bg.top === 0) ? bg.top : (this.cvs.height - dheight) / 2;\n                }\n                else {\n                    dheight = this.cvs.height;\n                    dwidth = dheight * iRatio;\n                    dy = bg.top || 0;\n                    dx = (bg.left || bg.left === 0) ? bg.left : (this.cvs.width - dwidth) / 2;\n                }\n                break;\n            case 'origin':\n                // 原图模式：canvas与原图大小一致，忽略初始化 传入的宽高参数；\n                // 同时，background 传入的 left/top 均被忽略；\n                this.cvs.width = iw;\n                this.cvs.height = ih;\n                sx = sy = 0;\n                swidth = iw;\n                sheight = ih;\n                dx = dy = 0;\n                dwidth = this.cvs.width;\n                dheight = this.cvs.height;\n                break;\n            default:\n                Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"throwError\"])('background type error!');\n                return;\n        }\n        this.ctx.drawImage(img, sx, sy, swidth, sheight, dx, dy, dwidth, dheight);\n        this._next();\n    };\n    // --------------------------------------------------------\n    // 绘制图层部分；\n    // --------------------------------------------------------\n    // 绘制矩形层；\n    MCompose.prototype.rect = function (ops) {\n        var _this = this;\n        this.queue.push(function () {\n            var _a = _this.cvs, cw = _a.width, ch = _a.height;\n            var _b = ops.fillColor, fillColor = _b === void 0 ? '#fff' : _b, _c = ops.strokeColor, strokeColor = _c === void 0 ? fillColor : _c, _d = ops.strokeWidth, strokeWidth = _d === void 0 ? 0 : _d, _e = ops.radius, radius = _e === void 0 ? 0 : _e;\n            var _f = ops.width, width = _f === void 0 ? 0 : _f, _g = ops.height, height = _g === void 0 ? 0 : _g, _h = ops.x, x = _h === void 0 ? 0 : _h, _j = ops.y, y = _j === void 0 ? 0 : _j;\n            width = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"transValue\"])(cw, 0, width, 'pos') - 2 * strokeWidth,\n                height = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"transValue\"])(ch, 0, height, 'pos') - 2 * strokeWidth;\n            // 计算尾值时，与边框的关系则为相反\n            x = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"transValue\"])(cw, width, x, 'pos') + (Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"include\"])(x, 'right') ? -strokeWidth : strokeWidth);\n            y = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"transValue\"])(ch, height, y, 'pos') + (Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"include\"])(y, 'bottom') ? -strokeWidth : strokeWidth);\n            Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"drawRoundRect\"])(_this.ctx, x, y, width, height, radius, fillColor, strokeWidth, strokeColor);\n            _this._resetCtx()._next();\n        });\n        return this;\n    };\n    // 绘制圆形层；\n    MCompose.prototype.circle = function (ops) {\n        var _this = this;\n        this.queue.push(function () {\n            var _a = ops.fillColor, fillColor = _a === void 0 ? '#fff' : _a, _b = ops.strokeColor, strokeColor = _b === void 0 ? fillColor : _b, _c = ops.strokeWidth, strokeWidth = _c === void 0 ? 0 : _c;\n            var _d = _this.cvs, cw = _d.width, ch = _d.height;\n            var r = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"transValue\"])(cw, 0, ops.r || 0, 'pos') - 2 * strokeWidth;\n            var _e = ops.x, x = _e === void 0 ? 0 : _e, _f = ops.y, y = _f === void 0 ? 0 : _f;\n            x = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"transValue\"])(cw, 2 * r, x, 'pos') + r + (Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"include\"])(x, 'right') ? -strokeWidth : strokeWidth);\n            y = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"transValue\"])(ch, 2 * r, y, 'pos') + r + (Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"include\"])(y, 'bottom') ? -strokeWidth : strokeWidth);\n            _this.ctx.beginPath();\n            _this.ctx.arc(x, y, r, 0, Math.PI * 2, false);\n            _this.ctx.fillStyle = fillColor;\n            _this.ctx.fill();\n            _this.ctx.strokeStyle = strokeColor;\n            _this.ctx.lineWidth = strokeWidth;\n            _this.ctx.stroke();\n            _this.ctx.closePath();\n            _this._resetCtx()._next();\n        });\n        return this;\n    };\n    // 重置ctx属性;\n    MCompose.prototype._resetCtx = function () {\n        this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n        return this;\n    };\n    // 绘制水印；基于 add 函数封装；\n    MCompose.prototype.watermark = function (image, ops) {\n        if (!image) {\n            Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"throwError\"])('there is not image of watermark.');\n            return this;\n        }\n        // 参数默认值；\n        var _a = ops.width, width = _a === void 0 ? '40%' : _a, _b = ops.pos, pos = _b === void 0 ? 'rightbottom' : _b, _c = ops.margin, margin = _c === void 0 ? 20 : _c;\n        var position = {\n            x: 0,\n            y: 0,\n            scale: 1,\n            rotate: 0,\n        };\n        switch (pos) {\n            case 'leftTop':\n                position.x = \"left:\" + margin;\n                position.y = \"top:\" + margin;\n                break;\n            case 'leftBottom':\n                position.x = \"left:\" + margin;\n                position.y = \"bottom:\" + margin;\n                break;\n            case 'rightTop':\n                position.x = \"right:\" + margin;\n                position.y = \"top:\" + margin;\n                break;\n            case 'rightBottom':\n                position.x = \"right:\" + margin;\n                position.y = \"bottom:\" + margin;\n                break;\n            default:\n        }\n        this.add(image, {\n            width: width,\n            pos: position,\n        });\n        return this;\n    };\n    // 通用绘制图层函数；\n    // 使用方式：\n    // 多张图: add([{image:'',options:{}},{image:'',options:{}}]);\n    // 单张图: add(image,options);\n    MCompose.prototype.add = function (image, options) {\n        var _this = this;\n        // 默认参数；\n        var def = {\n            width: '100%',\n            crop: {\n                x: 0,\n                y: 0,\n                width: '100%',\n                height: '100%',\n                radius: 0,\n            },\n            pos: {\n                x: 0,\n                y: 0,\n                scale: 1,\n                rotate: 0,\n            },\n        };\n        var images = _utils__WEBPACK_IMPORTED_MODULE_0__[\"is\"].arr(image) ? image : [{ image: image, options: options }];\n        images.map(function (_a) {\n            var image = _a.image, options = _a.options;\n            // 将封装好的 add函数 推入队列中待执行；\n            // 参数经过 _handleOps 加工；\n            _this.queue.push(function () {\n                Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"getImage\"])(image, function (img) {\n                    _this._add(img, _this._handleOps(img, Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"extend\"])(true, def, options)));\n                }, _this.fn.error);\n            });\n        });\n        return this;\n    };\n    MCompose.prototype._add = function (img, ops) {\n        var _a;\n        var crop = ops.crop;\n        var pos = ops.pos;\n        var width = ops.width;\n        if (width === 0)\n            Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"throwWarn\"])(\"the width of mc-element is zero\");\n        var _b = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"getSize\"])(img), iw = _b.iw, ih = _b.ih;\n        // 画布canvas参数；\n        var cdx, cdy, cdw, cdh;\n        // 素材canvas参数；\n        var lsw = crop.width, lsh = crop.height, radius = crop.radius;\n        // 图片需要裁剪\n        if (lsw !== iw || lsh !== ih || radius > 0) {\n            // 此时 img 已加载，且直接导出 canvas\n            // 因此 success 为同步代码\n            img = Object(_Src_utils_crop__WEBPACK_IMPORTED_MODULE_2__[\"crop\"])(img, crop).cvs;\n        }\n        var cratio = lsw / lsh;\n        var ldx, ldy, ldw, ldh;\n        // 由于 canvas 的特性，旋转只是 ctx 的旋转，并不是 canvas,\n        // 因此如果 canvas 与 ctx 完全相等时，旋转就会出现被裁剪的问题\n        // 这里通过将 canvas 放大的方式来解决该问题；\n        // 图片宽高比 * 1.4 是一个最安全的宽度，旋转任意角度都不会被裁剪；\n        // 没有旋转却长宽比很高大的图，会导致放大倍数太大，因此设置最高倍数为5；\n        // _ratio 为 较大边 / 较小边 的比例；\n        var _ratio = iw > ih ? iw / ih : ih / iw;\n        var lctxScale = _ratio * 1.4 > 5 ? 5 : _ratio * 1.4;\n        var spaceX, spaceY;\n        // 素材canvas的绘制;\n        var _c = _Src_canvas__WEBPACK_IMPORTED_MODULE_1__[\"Canvas\"].create(Math.round(lsw * lctxScale), Math.round(lsh * lctxScale)), lcvs = _c[0], lctx = _c[1];\n        // 限制canvas的大小，ios8以下为 2096, 其余平台均限制为 4096;\n        var limitLength = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"belowIOS8\"])() && (lcvs.width > 2096 || lcvs.height > 2096) ? 2096 : 4096;\n        var shrink = cratio > 1 ? limitLength / lcvs.width : limitLength / lcvs.height;\n        // 从素材canvas的中心点开始绘制；\n        ldx = -Math.round(lsw / 2);\n        ldy = -Math.round(lsh / 2);\n        ldw = lsw;\n        ldh = Math.round(lsw / cratio);\n        // 当素材缩放后超出限制时，缩放为限制值，避免绘制失败；\n        // 获取素材最终的宽高;\n        if ((lcvs.width > limitLength || lcvs.height > limitLength) && shrink) {\n            _a = [lcvs.width, lcvs.height, ldx, ldy, ldw, ldh].map(function (v) { return Math.round(v * shrink); }), lcvs.width = _a[0], lcvs.height = _a[1], ldx = _a[2], ldy = _a[3], ldw = _a[4], ldh = _a[5];\n        }\n        lctx.translate(lcvs.width / 2, lcvs.height / 2);\n        lctx.rotate(pos.rotate);\n        lctx.drawImage(img, ldx, ldy, ldw, ldh);\n        cdw = Math.round(width * lctxScale);\n        cdh = Math.round(cdw / cratio);\n        spaceX = (lctxScale - 1) * width / 2;\n        spaceY = spaceX / cratio;\n        // 获取素材的位置；\n        //    配置的位置 - 缩放的影响 - 绘制成正方形的影响；\n        cdx = Math.round(pos.x + cdw * (1 - pos.scale) / 2 - spaceX);\n        cdy = Math.round(pos.y + cdh * (1 - pos.scale) / 2 - spaceY);\n        cdw *= pos.scale;\n        cdh *= pos.scale;\n        this.ctx.drawImage(lcvs, cdx, cdy, cdw, cdh);\n        this._next();\n    };\n    MCompose.prototype._getRotate = function (r) {\n        if (_utils__WEBPACK_IMPORTED_MODULE_0__[\"is\"].str(r)) {\n            return parseFloat(r) * Math.PI / 180;\n        }\n        else if (_utils__WEBPACK_IMPORTED_MODULE_0__[\"is\"].num(r)) {\n            return r * Math.PI / 180;\n        }\n        else {\n            return 0;\n        }\n    };\n    // 参数加工函数；\n    MCompose.prototype._handleOps = function (img, ops) {\n        var _a = this.cvs, cw = _a.width, ch = _a.height;\n        var _b = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"getSize\"])(img), iw = _b.iw, ih = _b.ih;\n        // 图片宽高比；\n        var ratio = iw / ih;\n        // 根据参数计算后的绘制宽度；\n        var width = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"transValue\"])(cw, iw, ops.width, 'pos');\n        // 裁剪参数；\n        var cropw = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"transValue\"])(cw, iw, ops.crop.width, 'crop');\n        var croph = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"transValue\"])(ch, ih, ops.crop.height, 'crop');\n        var crop = {\n            width: cropw,\n            height: croph,\n            x: Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"transValue\"])(iw, cropw, ops.crop.x, 'crop'),\n            y: Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"transValue\"])(ih, croph, ops.crop.y, 'crop'),\n            radius: Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"getLength\"])(cropw, ops.crop.radius),\n        };\n        // 裁剪的最大宽高；\n        var maxLsw, maxLsh;\n        // 最大值判定；\n        if (crop.x > iw)\n            crop.x = iw;\n        if (crop.y > ih)\n            crop.y = ih;\n        maxLsw = iw - crop.x;\n        maxLsh = ih - crop.y;\n        if (crop.width > maxLsw)\n            crop.width = maxLsw;\n        if (crop.height > maxLsh)\n            crop.height = maxLsh;\n        // 位置参数；\n        var _c = ops.pos, px = _c.x, py = _c.y, pr = _c.rotate, _d = _c.scale, ps = _d === void 0 ? 1 : _d;\n        var pos = {\n            x: Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"transValue\"])(cw, width, px, 'pos'),\n            y: Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"transValue\"])(ch, width / ratio, py, 'pos'),\n            scale: ps,\n            rotate: this._getRotate(pr),\n        };\n        return { width: width, crop: crop, pos: pos };\n    };\n    MCompose.prototype._createStyle = function (fontSize, lineHeight) {\n        return {\n            font: fontSize + \"px \" + this._defaultFontFamily,\n            lineHeight: lineHeight,\n            color: '#000',\n            type: 'fill',\n            lineWidth: 1,\n            shadow: {\n                color: null,\n                blur: 0,\n                offsetX: 0,\n                offsetY: 0,\n            },\n        };\n    };\n    MCompose.prototype.text = function (context, ops) {\n        var _this = this;\n        if (context === void 0) { context = ''; }\n        // 默认的字体大小;\n        var dfs = this.cvs.width / 20;\n        this.queue.push(function () {\n            var option = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"extend\"])(true, {\n                width: 300,\n                align: 'left',\n                smallStyle: _this._createStyle(dfs * 0.8, dfs * 0.9),\n                normalStyle: _this._createStyle(dfs, dfs * 1.1),\n                largeStyle: _this._createStyle(dfs * 1.3, dfs * 1.4),\n                pos: {\n                    x: 0,\n                    y: 0,\n                    rotate: 0,\n                },\n            }, ops);\n            // 解析字符串模板后，调用字体绘制函数；\n            var parseContext = _this._parse(context);\n            var max = 0, maxFont;\n            parseContext.map(function (v) {\n                if (v.size > max) {\n                    max = v.size;\n                    maxFont = v.type;\n                }\n            });\n            // 当设置的宽度小于字体宽度时，强行将设置宽度设为与字体一致；\n            var maxFontSize = parseInt(option[maxFont + \"Style\"].font);\n            if (maxFontSize && option.width < maxFontSize)\n                option.width = maxFontSize;\n            _this._text(parseContext, option);\n            _this._resetCtx()._next();\n        });\n        return this;\n    };\n    // 字符串模板解析函数\n    // 解析 <s></s> <b></b>\n    MCompose.prototype._parse = function (context) {\n        var arr = context.split(/<s>|<b>/);\n        var result = [];\n        for (var i = 0; i < arr.length; i++) {\n            var value = arr[i];\n            if (/<\\/s>|<\\/b>/.test(value)) {\n                var splitTag = /<\\/s>/.test(value) ? '</s>' : '</b>', type = /<\\/s>/.test(value) ? 'small' : 'large', tmp = arr[i].split(splitTag);\n                result.push({\n                    type: type,\n                    text: tmp[0],\n                    // 用于字体的大小比较；\n                    size: type === 'small' ? 0 : 2,\n                });\n                tmp[1] && result.push({\n                    type: 'normal',\n                    text: tmp[1],\n                    size: 1,\n                });\n                continue;\n            }\n            arr[i] && result.push({\n                text: arr[i],\n                type: 'normal',\n                size: 1,\n            });\n        }\n        return result;\n    };\n    MCompose.prototype._text = function (textArr, option) {\n        var _this = this;\n        this.data.textId++;\n        this.data.text[this.data.textId] = {};\n        // 处理宽度参数；\n        var opsWidth = option.width = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"transValue\"])(this.cvs.width, 0, option.width, 'pos');\n        var style, line = 1, lineWidth = 0, lineHeight = this._getLineHeight(textArr, option), x = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"transValue\"])(this.cvs.width, opsWidth, 0, 'pos'), y = (Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"transValue\"])(this.cvs.height, 0, 0, 'pos')) + lineHeight;\n        // data:字体数据；\n        // lineWidth:行宽；\n        this.data.text[this.data.textId][line] = {\n            data: [],\n            lineWidth: 0,\n        };\n        // 生成字体数据；\n        textArr.map(function (v) {\n            style = option[v.type + \"Style\"];\n            _this.ctx.font = style.font;\n            // 先获取整个字体块的宽度\n            // 用于判断是否会再当前字体块产生换行\n            var width = _this.ctx.measureText(v.text).width;\n            // 处理 <br> 换行，先替换成 '|',便于单字绘图时进行判断；\n            var context = v.text.replace(/<br>/g, '|');\n            // 先进行字体块超出判断，超出宽度 或 包含换行符 时采用单字绘制；\n            if ((lineWidth + width) > opsWidth || Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"include\"])(context, '|')) {\n                for (var i = 0, fontLength = context.length; i < fontLength; i++) {\n                    var _context = context[i];\n                    width = _this.ctx.measureText(_context).width;\n                    // 当字体的计算宽度 > 设置的宽度 || 内容中包含换行时,进入换行逻辑；\n                    if ((lineWidth + width) > opsWidth || _context === '|') {\n                        x = lineWidth = 0;\n                        y += lineHeight;\n                        line += 1;\n                        _this.data.text[_this.data.textId][line] = {\n                            data: [],\n                            lineWidth: 0,\n                        };\n                        // 不绘制换行符\n                        if (_context === '|')\n                            continue;\n                    }\n                    // 生成绘制数据\n                    var lineData = _this.data.text[_this.data.textId][line];\n                    lineData.data.push({ context: _context, x: x, y: y, style: style, width: width });\n                    x += width;\n                    lineData.lineWidth = lineWidth += width;\n                }\n            }\n            else {\n                // 当前字体块不会换行，则整块绘制；\n                var lineData = _this.data.text[_this.data.textId][line];\n                lineData.data.push({ context: context, x: x, y: y, style: style, width: width });\n                x += width;\n                lineData.lineWidth = lineWidth += width;\n            }\n        });\n        // 创建文字画布；\n        var _a = _Src_canvas__WEBPACK_IMPORTED_MODULE_1__[\"Canvas\"].create(opsWidth, this._getTextRectHeight(line)), tcvs = _a[0], tctx = _a[1];\n        var tdh = tcvs.height;\n        var tdw = tcvs.width;\n        var tdx = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"transValue\"])(this.cvs.width, tdw, option.pos.x, 'pos');\n        var tdy = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"transValue\"])(this.cvs.height, tdh, option.pos.y, 'pos');\n        // 通过字体数据进行文字的绘制；\n        Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"forin\"])(this.data.text[this.data.textId], function (k, v) {\n            // \b增加 align 的功能；\n            var add = 0;\n            if (v.lineWidth < opsWidth) {\n                if (option.align === 'center') {\n                    add = (opsWidth - v.lineWidth) / 2;\n                }\n                else if (option.align === 'right') {\n                    add = opsWidth - v.lineWidth;\n                }\n            }\n            v.data.map(function (text) {\n                text.x += add;\n                _this._fillText(tctx, text);\n            });\n        });\n        // tcvs.style.width = '300px'\n        // document.body.appendChild(tcvs)\n        // 绘制文字画布；\n        this.ctx.translate(tdx + tdw / 2, tdy + tdh / 2);\n        this.ctx.rotate(this._getRotate(option.pos.rotate));\n        this.ctx.drawImage(tcvs, -tdw / 2, -tdh / 2, tdw, tdh);\n    };\n    MCompose.prototype._getLineHeight = function (textArr, option) {\n        var lh = 0, vlh;\n        textArr.map(function (v) {\n            vlh = option[v.type + \"Style\"].lineHeight;\n            if (vlh > lh)\n                lh = vlh;\n        });\n        return lh;\n    };\n    MCompose.prototype._fillText = function (ctx, text) {\n        var context = text.context, x = text.x, y = text.y, style = text.style;\n        var align = style.align, lineWidth = style.lineWidth, shadow = style.shadow, font = style.font, gradient = style.gradient, lineHeight = style.lineHeight;\n        var color = shadow.color, blur = shadow.blur, offsetX = shadow.offsetX, offsetY = shadow.offsetY;\n        ctx.font = font;\n        ctx.textAlign = align;\n        ctx.textBaseline = 'alphabetic';\n        ctx.lineWidth = lineWidth;\n        ctx.shadowColor = color;\n        ctx.shadowBlur = blur;\n        ctx.shadowOffsetX = offsetX;\n        ctx.shadowOffsetY = offsetY;\n        if (gradient) {\n            var type = gradient.type, colorStop = gradient.colorStop;\n            var x1 = void 0, y1 = void 0, x2 = void 0, y2 = void 0;\n            if (type === 1) {\n                x1 = x;\n                y1 = y;\n                x2 = x + text.width;\n                y2 = y;\n            }\n            else {\n                x1 = x;\n                y1 = y - lineHeight;\n                x2 = x;\n                y2 = y;\n            }\n            var grad_1 = ctx.createLinearGradient(x1, y1, x2, y2);\n            var colorNum_1 = colorStop.length || 0;\n            Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"forin\"])(colorStop, function (i, v) {\n                grad_1.addColorStop(1 / colorNum_1 * (+i + 1), v);\n            });\n            ctx[style.type + \"Style\"] = grad_1;\n        }\n        else {\n            ctx[style.type + \"Style\"] = style.color;\n        }\n        ctx[style.type + \"Text\"](context, x, y);\n        this._resetCtx();\n    };\n    MCompose.prototype._getTextRectHeight = function (lastLine) {\n        var lastLineData = this.data.text[this.data.textId][lastLine].data[0];\n        return lastLineData.y + lastLineData.style.lineHeight;\n    };\n    // 绘制函数；\n    MCompose.prototype.draw = function (ops) {\n        var _this = this;\n        if (ops === void 0) { ops = {}; }\n        return new Promise(function (resolve, reject) {\n            var config = {\n                type: 'jpeg',\n                quality: .9,\n                exportType: 'base64',\n                success: function (b64) { },\n                error: function (err) { },\n            };\n            if (_utils__WEBPACK_IMPORTED_MODULE_0__[\"is\"].fn(ops)) {\n                config.success = ops;\n            }\n            else {\n                config = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"extend\"])(true, config, ops);\n                if (config.type === 'jpg')\n                    config.type = 'jpeg';\n            }\n            _this.fn.error = function (err) {\n                config.error(err);\n                reject(err);\n            };\n            _this.fn.success = function () {\n                if (config.exportType === 'canvas') {\n                    config.success(_this.cvs);\n                    resolve(_this.cvs);\n                }\n                else {\n                    setTimeout(function () {\n                        var b64 = _this.cvs.toDataURL(\"image/\" + config.type, config.quality);\n                        config.success(b64);\n                        resolve(b64);\n                    }, 0);\n                }\n            };\n            _this._next();\n        });\n    };\n    MCompose.prototype._next = function () {\n        if (this.queue.length > 0) {\n            this.ctx.save();\n            var next = this.queue.shift();\n            next && next();\n            this.ctx.restore();\n        }\n        else {\n            this.fn.success();\n        }\n    };\n    MCompose.prototype.clear = function () {\n        this.ctx.clearRect(0, 0, this.cvs.width, this.cvs.height);\n        return this;\n    };\n    return MCompose;\n}());\n\n\n\n//# sourceURL=webpack:///./src/modules/mcompose.ts?");

/***/ }),

/***/ "./src/modules/mimage.ts":
/*!*******************************!*\
  !*** ./src/modules/mimage.ts ***!
  \*******************************/
/*! exports provided: MImage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MImage\", function() { return MImage; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _Src_utils_queue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @Src/utils/queue */ \"./src/utils/queue.ts\");\n/* harmony import */ var _Src_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @Src/utils */ \"./src/utils/index.ts\");\n/* harmony import */ var _Src_utils_crop__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @Src/utils/crop */ \"./src/utils/crop.ts\");\n/* harmony import */ var _Src_utils_filter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @Src/utils/filter */ \"./src/utils/filter.ts\");\n/* harmony import */ var _Src_canvas__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @Src/canvas */ \"./src/canvas/index.ts\");\n\n\n\n\n\n\nvar MImage = /** @class */ (function () {\n    function MImage(image) {\n        this._image = image;\n        this._queue = new _Src_utils_queue__WEBPACK_IMPORTED_MODULE_1__[\"Queue\"]();\n        this.clear();\n    }\n    MImage.prototype.clear = function () {\n        this._getImage()._drawCanvas();\n    };\n    MImage.prototype._drawCanvas = function () {\n        return this._run(function (img) {\n            var _a = Object(_Src_utils__WEBPACK_IMPORTED_MODULE_2__[\"getSize\"])(img), iw = _a.iw, ih = _a.ih;\n            var _b = _Src_canvas__WEBPACK_IMPORTED_MODULE_5__[\"Canvas\"].create(iw, ih), cvs = _b[0], ctx = _b[1];\n            ctx.drawImage(img, 0, 0, iw, ih);\n            return { cvs: cvs, ctx: ctx };\n        });\n    };\n    MImage.prototype._getImage = function () {\n        var _this = this;\n        // 加载图片\n        return this._run(function () {\n            return new Promise(function (resolve) {\n                if (_Src_utils__WEBPACK_IMPORTED_MODULE_2__[\"is\"].str(_this._image)) {\n                    Object(_Src_utils__WEBPACK_IMPORTED_MODULE_2__[\"getImage\"])(_this._image, function (img) {\n                        resolve(_this._image = img);\n                    }, _this._error);\n                }\n                else {\n                    resolve(_this._image);\n                }\n            });\n        });\n    };\n    MImage.prototype._run = function (fn) {\n        var _this = this;\n        this._queue.push(function (next, data) {\n            setTimeout(function () { return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[\"__awaiter\"])(_this, void 0, void 0, function () {\n                var nextData;\n                return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[\"__generator\"])(this, function (_a) {\n                    nextData = fn(data);\n                    if (_Src_utils__WEBPACK_IMPORTED_MODULE_2__[\"is\"].promise(nextData)) {\n                        nextData.then(next);\n                    }\n                    else {\n                        next(nextData);\n                    }\n                    return [2 /*return*/];\n                });\n            }); }, 0);\n        });\n        return this;\n    };\n    MImage.prototype.draw = function (exportConfig) {\n        var _this = this;\n        if (exportConfig === void 0) { exportConfig = {}; }\n        return new Promise(function (resolve, reject) {\n            var config = {\n                type: 'jpeg',\n                quality: 1,\n                exportType: 'base64',\n                success: function (result) { },\n                error: function (err) { },\n            };\n            if (_Src_utils__WEBPACK_IMPORTED_MODULE_2__[\"is\"].fn(exportConfig)) {\n                config.success = exportConfig;\n            }\n            else {\n                config = Object(_Src_utils__WEBPACK_IMPORTED_MODULE_2__[\"extend\"])(true, config, exportConfig);\n                if (config.type === 'jpg')\n                    config.type = 'jpeg';\n            }\n            var success = function (result) {\n                config.success(result);\n                resolve(result);\n            };\n            _this._error = function (err) {\n                config.error(err);\n                reject(err);\n            };\n            _this._queue.perform(function (_a) {\n                var cvs = _a.cvs;\n                if (config.exportType === 'canvas') {\n                    success(cvs);\n                }\n                else {\n                    setTimeout(function () {\n                        var b64 = cvs.toDataURL(\"image/\" + config.type, config.quality);\n                        success(b64);\n                    }, 0);\n                }\n            });\n        });\n    };\n    MImage.prototype.crop = function (options) {\n        return this._run(function (_a) {\n            var cvs = _a.cvs;\n            return Object(_Src_utils_crop__WEBPACK_IMPORTED_MODULE_3__[\"crop\"])(cvs, options);\n        });\n    };\n    MImage.prototype.compress = function (options) {\n        if (options === void 0) { options = {}; }\n        return this.draw(options);\n    };\n    MImage.prototype.filter = function (type) {\n        var data = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            data[_i - 1] = arguments[_i];\n        }\n        return this._run(function (_a) {\n            var _b, _c, _d, _e, _f;\n            var cvs = _a.cvs, ctx = _a.ctx;\n            var fcvs = cvs, fctx = ctx;\n            switch (type) {\n                case 'blur':\n                    _b = _Src_utils_filter__WEBPACK_IMPORTED_MODULE_4__[\"blur\"].apply(void 0, Object(tslib__WEBPACK_IMPORTED_MODULE_0__[\"__spreadArrays\"])([cvs], data)), fcvs = _b[0], fctx = _b[1];\n                    break;\n                case 'flip':\n                    _c = _Src_utils_filter__WEBPACK_IMPORTED_MODULE_4__[\"flip\"].apply(void 0, Object(tslib__WEBPACK_IMPORTED_MODULE_0__[\"__spreadArrays\"])([cvs], data)), fcvs = _c[0], fctx = _c[1];\n                    break;\n                case 'gray':\n                    _d = Object(_Src_utils_filter__WEBPACK_IMPORTED_MODULE_4__[\"gray\"])(cvs), fcvs = _d[0], fctx = _d[1];\n                    break;\n                case 'mosaic':\n                    _e = _Src_utils_filter__WEBPACK_IMPORTED_MODULE_4__[\"mosaic\"].apply(void 0, Object(tslib__WEBPACK_IMPORTED_MODULE_0__[\"__spreadArrays\"])([cvs], data)), fcvs = _e[0], fctx = _e[1];\n                    break;\n                case 'oil':\n                    _f = _Src_utils_filter__WEBPACK_IMPORTED_MODULE_4__[\"oil\"].apply(void 0, Object(tslib__WEBPACK_IMPORTED_MODULE_0__[\"__spreadArrays\"])([cvs], data)), fcvs = _f[0], fctx = _f[1];\n                    break;\n            }\n            return {\n                cvs: fcvs,\n                ctx: fctx,\n            };\n        });\n    };\n    return MImage;\n}());\n\n\n\n//# sourceURL=webpack:///./src/modules/mimage.ts?");

/***/ }),

/***/ "./src/utils/crop.ts":
/*!***************************!*\
  !*** ./src/utils/crop.ts ***!
  \***************************/
/*! exports provided: crop */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"crop\", function() { return crop; });\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index */ \"./src/utils/index.ts\");\n/* harmony import */ var _canvas__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../canvas */ \"./src/canvas/index.ts\");\n\n\nfunction crop(img, options) {\n    var _a = Object(_index__WEBPACK_IMPORTED_MODULE_0__[\"getSize\"])(img), iw = _a.iw, ih = _a.ih;\n    var ops = Object(_index__WEBPACK_IMPORTED_MODULE_0__[\"extend\"])(true, {\n        x: 0,\n        y: 0,\n        width: '100%',\n        height: '100%',\n        radius: 0,\n    }, options);\n    var width = ops.width, height = ops.height, x = ops.x, y = ops.y, radius = ops.radius;\n    width = Object(_index__WEBPACK_IMPORTED_MODULE_0__[\"getLength\"])(iw, width);\n    height = Object(_index__WEBPACK_IMPORTED_MODULE_0__[\"getLength\"])(ih, height);\n    if (width > iw)\n        width = iw;\n    if (height > ih)\n        height = ih;\n    x = Object(_index__WEBPACK_IMPORTED_MODULE_0__[\"transValue\"])(iw, width, x, 'pos');\n    y = Object(_index__WEBPACK_IMPORTED_MODULE_0__[\"transValue\"])(ih, height, y, 'pos');\n    radius = Object(_index__WEBPACK_IMPORTED_MODULE_0__[\"getLength\"])(iw, radius);\n    var _b = _canvas__WEBPACK_IMPORTED_MODULE_1__[\"Canvas\"].create(width, height), cCvs = _b[0], cCtx = _b[1];\n    cCvs.width = width;\n    cCvs.height = height;\n    Object(_index__WEBPACK_IMPORTED_MODULE_0__[\"drawRoundRect\"])(cCtx, 0, 0, width, height, radius);\n    cCtx.globalCompositeOperation = 'source-in';\n    cCtx.drawImage(img, -x, -y, iw, ih);\n    return {\n        cvs: cCvs,\n        ctx: cCtx,\n    };\n}\n\n\n//# sourceURL=webpack:///./src/utils/crop.ts?");

/***/ }),

/***/ "./src/utils/draw.ts":
/*!***************************!*\
  !*** ./src/utils/draw.ts ***!
  \***************************/
/*! exports provided: drawRoundRectPath, drawRoundRect */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"drawRoundRectPath\", function() { return drawRoundRectPath; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"drawRoundRect\", function() { return drawRoundRect; });\nfunction drawRoundRectPath(ctx, width, height, radius) {\n    ctx.beginPath();\n    ctx.arc(width - radius, height - radius, radius, 0, Math.PI / 2);\n    ctx.lineTo(radius, height);\n    ctx.arc(radius, height - radius, radius, Math.PI / 2, Math.PI);\n    ctx.lineTo(0, radius);\n    ctx.arc(radius, radius, radius, Math.PI, Math.PI * 3 / 2);\n    ctx.lineTo(width - radius, 0);\n    ctx.arc(width - radius, radius, radius, Math.PI * 3 / 2, Math.PI * 2);\n    ctx.lineTo(width, height - radius);\n    ctx.closePath();\n}\nfunction drawRoundRect(ctx, x, y, width, height, radius, fillColor, strokeWidth, strokeColor) {\n    if (radius === void 0) { radius = 0; }\n    if (fillColor === void 0) { fillColor = '#fff'; }\n    if (strokeWidth === void 0) { strokeWidth = 0; }\n    if (strokeColor === void 0) { strokeColor = '#000'; }\n    // 圆的直径必然要小于矩形的宽高\n    var minL = Math.min(width, height);\n    if (2 * radius > minL)\n        radius = minL / 2;\n    ctx.save();\n    ctx.translate(x, y);\n    // 绘制圆角矩形的各个边  \n    drawRoundRectPath(ctx, width, height, radius);\n    ctx.fillStyle = fillColor;\n    ctx.fill();\n    ctx.lineWidth = strokeWidth;\n    ctx.strokeStyle = strokeColor;\n    ctx.stroke();\n    ctx.restore();\n}\n\n\n//# sourceURL=webpack:///./src/utils/draw.ts?");

/***/ }),

/***/ "./src/utils/extend.ts":
/*!*****************************!*\
  !*** ./src/utils/extend.ts ***!
  \*****************************/
/*! exports provided: extend */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"extend\", function() { return extend; });\nfunction isPlainObject(object) {\n    var class2type = {}, toString = class2type.toString, hasOwn = class2type.hasOwnProperty, fnToString = hasOwn.toString, ObjectFunctionString = fnToString.call(Object);\n    if (!object || toString.call(object) !== '[object Object]')\n        return false;\n    var proto = Object.getPrototypeOf(object);\n    if (!proto)\n        return true;\n    var ctor = hasOwn.call(proto, 'constructor') && proto.constructor;\n    return typeof ctor === 'function' && fnToString.call(ctor) === ObjectFunctionString;\n}\nfunction extend() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var options;\n    var name;\n    var clone;\n    var copy;\n    var source;\n    var copyIsArray;\n    var target = arguments[0] || {};\n    var i = 1;\n    var length = arguments.length;\n    var deep = false;\n    if (typeof target === 'boolean') {\n        deep = target;\n        target = arguments[i] || {};\n        i++;\n    }\n    if (typeof target !== 'object' && typeof target !== 'function') {\n        target = {};\n    }\n    if (i === length) {\n        target = this;\n        i--;\n    }\n    for (; i < length; i++) {\n        if ((options = arguments[i]) !== null) {\n            for (name in options) {\n                if (options.hasOwnProperty(name)) {\n                    source = target[name];\n                    copy = options[name];\n                    if (target === copy) {\n                        continue;\n                    }\n                    if (deep && copy && (isPlainObject(copy) || (copyIsArray = Array.isArray(copy)))) {\n                        if (copyIsArray) {\n                            copyIsArray = false;\n                            clone = source && Array.isArray(source) ? source : [];\n                        }\n                        else {\n                            clone = source && isPlainObject(source) ? source : {};\n                        }\n                        target[name] = extend(deep, clone, copy);\n                    }\n                    else if (copy !== undefined) {\n                        target[name] = copy;\n                    }\n                }\n            }\n        }\n    }\n    return target;\n}\n\n\n//# sourceURL=webpack:///./src/utils/extend.ts?");

/***/ }),

/***/ "./src/utils/filter.ts":
/*!*****************************!*\
  !*** ./src/utils/filter.ts ***!
  \*****************************/
/*! exports provided: blur, flip, gray, mosaic, oil */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"blur\", function() { return blur; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"flip\", function() { return flip; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"gray\", function() { return gray; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"mosaic\", function() { return mosaic; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"oil\", function() { return oil; });\nfunction boxBlur(src, dst, width, height, radius) {\n    var tableSize = radius * 2 + 1;\n    var radiusPlus1 = radius + 1;\n    var widthMinus1 = width - 1;\n    var r, g, b, a;\n    var srcIndex = 0;\n    var dstIndex;\n    var p, next, prev;\n    var i, l, x, y, nextIndex, prevIndex;\n    var sumTable = [];\n    for (i = 0, l = 256 * tableSize; i < l; i += 1) {\n        sumTable[i] = i / tableSize | 0;\n    }\n    for (y = 0; y < height; y += 1) {\n        r = g = b = a = 0;\n        dstIndex = y;\n        p = srcIndex << 2;\n        r += radiusPlus1 * src[p];\n        g += radiusPlus1 * src[p + 1];\n        b += radiusPlus1 * src[p + 2];\n        a += radiusPlus1 * src[p + 3];\n        for (i = 1; i <= radius; i += 1) {\n            p = (srcIndex + (i < width ? i : widthMinus1)) << 2;\n            r += src[p];\n            g += src[p + 1];\n            b += src[p + 2];\n            a += src[p + 3];\n        }\n        for (x = 0; x < width; x += 1) {\n            p = dstIndex << 2;\n            dst[p] = sumTable[r];\n            dst[p + 1] = sumTable[g];\n            dst[p + 2] = sumTable[b];\n            dst[p + 3] = sumTable[a];\n            nextIndex = x + radiusPlus1;\n            if (nextIndex > widthMinus1) {\n                nextIndex = widthMinus1;\n            }\n            prevIndex = x - radius;\n            if (prevIndex < 0) {\n                prevIndex = 0;\n            }\n            next = (srcIndex + nextIndex) << 2;\n            prev = (srcIndex + prevIndex) << 2;\n            r += src[next] - src[prev];\n            g += src[next + 1] - src[prev + 1];\n            b += src[next + 2] - src[prev + 2];\n            a += src[next + 3] - src[prev + 3];\n            dstIndex += height;\n        }\n        srcIndex += width;\n    }\n}\n/**\n * Algorithm based on BoxBlurFilter.java by Huxtable.com\n * @see http://www.jhlabs.com/ip/blurring.html\n * Copyright 2005 Huxtable.com. All rights reserved.\n */\nfunction blur(cvs, value) {\n    if (value === void 0) { value = 6; }\n    var width = cvs.width, height = cvs.height;\n    var ctx = cvs.getContext('2d');\n    var oPixels = ctx.getImageData(0, 0, width, height).data;\n    var imageData = ctx.createImageData(width, height);\n    var dstPixels = imageData.data;\n    var tmpData = ctx.createImageData(width, height);\n    var tmpPixels = tmpData.data;\n    for (var i = 0; i < value; i += 1) {\n        boxBlur(i ? dstPixels : oPixels, tmpPixels, width, height, 2);\n        boxBlur(tmpPixels, dstPixels, width, height, 2);\n    }\n    ctx.putImageData(imageData, 0, 0);\n    return [cvs, ctx];\n}\n// 翻转\nfunction flip(cvs, dire) {\n    if (dire === void 0) { dire = 'hor'; }\n    var width = cvs.width, height = cvs.height;\n    var ctx = cvs.getContext('2d');\n    var oPixels = ctx.getImageData(0, 0, width, height).data;\n    var imageData = ctx.createImageData(width, height);\n    var dstPixels = imageData.data;\n    var y, x, off, dstOff;\n    for (y = 0; y < height; y++) {\n        for (x = 0; x < width; x++) {\n            off = (y * width + x) * 4;\n            dstOff = dire === 'hor' ?\n                (y * width + (width - x - 1)) * 4 :\n                ((height - y - 1) * width + x) * 4;\n            dstPixels[dstOff] = oPixels[off];\n            dstPixels[dstOff + 1] = oPixels[off + 1];\n            dstPixels[dstOff + 2] = oPixels[off + 2];\n            dstPixels[dstOff + 3] = oPixels[off + 3];\n        }\n    }\n    ctx.putImageData(imageData, 0, 0);\n    return [cvs, ctx];\n}\n// 黑白\nfunction gray(cvs) {\n    var width = cvs.width, height = cvs.height;\n    var ctx = cvs.getContext('2d');\n    var oPixels = ctx.getImageData(0, 0, width, height).data;\n    var imageData = ctx.createImageData(width, height);\n    var dstPixels = imageData.data;\n    var i, r, g, b, v;\n    for (i = 0; i < oPixels.length; i += 4) {\n        r = oPixels[i];\n        g = oPixels[i + 1];\n        b = oPixels[i + 2];\n        v = 0.3 * r + 0.59 * g + 0.11 * b;\n        dstPixels[i] = dstPixels[i + 1] = dstPixels[i + 2] = v;\n        dstPixels[i + 3] = oPixels[i + 3];\n    }\n    ctx.putImageData(imageData, 0, 0);\n    return [cvs, ctx];\n}\n// 马赛克\nfunction mosaic(cvs, block) {\n    if (block === void 0) { block = 10; }\n    var width = cvs.width, height = cvs.height;\n    var ctx = cvs.getContext('2d');\n    var oPixels = ctx.getImageData(0, 0, width, height).data;\n    var imageData = ctx.createImageData(width, height);\n    var dstPixels = imageData.data;\n    var cols = Math.ceil(width / block), rows = Math.ceil(height / block), row, col, x_start, x_end, y_start, y_end, x, y, yIndex, index, size, r, g, b, a;\n    for (row = 0; row < rows; row++) {\n        y_start = row * block;\n        y_end = y_start + block;\n        if (y_end > height)\n            y_end = height;\n        for (col = 0; col < cols; col++) {\n            x_start = col * block;\n            x_end = x_start + block;\n            if (x_end > width)\n                x_end = width;\n            r = g = b = a = 0;\n            size = (x_end - x_start) * (y_end - y_start);\n            for (y = y_start; y < y_end; y += 1) {\n                yIndex = y * width;\n                for (x = x_start; x < x_end; x += 1) {\n                    index = (yIndex + x) << 2;\n                    r += oPixels[index];\n                    g += oPixels[index + 1];\n                    b += oPixels[index + 2];\n                    a += oPixels[index + 3];\n                }\n            }\n            r = (r / size) + 0.5 | 0;\n            g = (g / size) + 0.5 | 0;\n            b = (b / size) + 0.5 | 0;\n            a = (a / size) + 0.5 | 0;\n            for (y = y_start; y < y_end; y++) {\n                yIndex = y * width;\n                for (x = x_start; x < x_end; x++) {\n                    index = (yIndex + x) << 2;\n                    dstPixels[index] = r;\n                    dstPixels[index + 1] = g;\n                    dstPixels[index + 2] = b;\n                    dstPixels[index + 3] = a;\n                }\n            }\n        }\n    }\n    ctx.putImageData(imageData, 0, 0);\n    return [cvs, ctx];\n}\n// range: 1 - 5\n// levels: 1 - 256\nfunction oil(cvs, range, levels) {\n    if (range === void 0) { range = 2; }\n    if (levels === void 0) { levels = 32; }\n    var width = cvs.width, height = cvs.height;\n    var ctx = cvs.getContext('2d');\n    var oPixels = ctx.getImageData(0, 0, width, height).data;\n    var imageData = ctx.createImageData(width, height);\n    var dstPixels = imageData.data;\n    var rh = [], gh = [], bh = [], rt = [], gt = [], bt = [];\n    var index = 0, rowIndex, colIndex, offset, srcIndex, x, y, z, row, col, sr, sg, sb, ri, gi, bi, r, g, b;\n    for (y = 0; y < height; y++) {\n        for (x = 0; x < width; x++) {\n            for (z = 0; z < levels; z++) {\n                rh[z] = gh[z] = bh[z] = rt[z] = gt[z] = bt[z] = 0;\n            }\n            for (row = -range; row <= range; row++) {\n                rowIndex = y + row;\n                if (rowIndex < 0 || rowIndex >= height)\n                    continue;\n                offset = rowIndex * width;\n                for (col = -range; col <= range; col++) {\n                    colIndex = x + col;\n                    if (colIndex < 0 || colIndex >= width)\n                        continue;\n                    srcIndex = (offset + colIndex) << 2;\n                    sr = oPixels[srcIndex];\n                    sg = oPixels[srcIndex + 1];\n                    sb = oPixels[srcIndex + 2];\n                    ri = (sr * levels) >> 8;\n                    gi = (sg * levels) >> 8;\n                    bi = (sb * levels) >> 8;\n                    rt[ri] += sr;\n                    gt[gi] += sg;\n                    bt[bi] += sb;\n                    rh[ri] += 1;\n                    gh[gi] += 1;\n                    bh[bi] += 1;\n                }\n            }\n            r = g = b = 0;\n            for (z = 1; z < levels; z++) {\n                if (rh[z] > rh[r])\n                    r = z;\n                if (gh[z] > gh[g])\n                    g = z;\n                if (bh[z] > bh[b])\n                    b = z;\n            }\n            dstPixels[index] = rt[r] / rh[r] | 0;\n            dstPixels[index + 1] = gt[g] / gh[g] | 0;\n            dstPixels[index + 2] = bt[b] / bh[b] | 0;\n            dstPixels[index + 3] = oPixels[index + 3];\n            index += 4;\n        }\n    }\n    ctx.putImageData(imageData, 0, 0);\n    return [cvs, ctx];\n}\n\n\n//# sourceURL=webpack:///./src/utils/filter.ts?");

/***/ }),

/***/ "./src/utils/index.ts":
/*!****************************!*\
  !*** ./src/utils/index.ts ***!
  \****************************/
/*! exports provided: is, type, extend, drawRoundRect, getImage, forin, belowIOS8, deepCopy, getSize, include, transValue, getLength, throwError, throwWarn */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getImage\", function() { return getImage; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"forin\", function() { return forin; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"belowIOS8\", function() { return belowIOS8; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"deepCopy\", function() { return deepCopy; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getSize\", function() { return getSize; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"include\", function() { return include; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"transValue\", function() { return transValue; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getLength\", function() { return getLength; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"throwError\", function() { return throwError; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"throwWarn\", function() { return throwWarn; });\n/* harmony import */ var _is__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./is */ \"./src/utils/is.ts\");\n/* harmony import */ var _Src_canvas__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @Src/canvas */ \"./src/canvas/index.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"is\", function() { return _is__WEBPACK_IMPORTED_MODULE_0__[\"is\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"type\", function() { return _is__WEBPACK_IMPORTED_MODULE_0__[\"type\"]; });\n\n/* harmony import */ var _extend__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./extend */ \"./src/utils/extend.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"extend\", function() { return _extend__WEBPACK_IMPORTED_MODULE_2__[\"extend\"]; });\n\n/* harmony import */ var _draw__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./draw */ \"./src/utils/draw.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"drawRoundRect\", function() { return _draw__WEBPACK_IMPORTED_MODULE_3__[\"drawRoundRect\"]; });\n\n\n\n\n\n\nfunction getImage(image, cbk, error) {\n    if (typeof image === 'string') {\n        _Src_canvas__WEBPACK_IMPORTED_MODULE_1__[\"Canvas\"].loadImage(image, cbk, error);\n    }\n    else if (typeof image === 'object') {\n        cbk(image);\n    }\n    else {\n        throwWarn(\"getImage error, src=\" + image);\n    }\n}\nfunction forin(obj, cbk) {\n    for (var k in obj) {\n        if (obj.hasOwnProperty(k)) {\n            cbk(k, obj[k]);\n        }\n    }\n}\nfunction belowIOS8() {\n    if (typeof window === 'undefined')\n        return false;\n    var UA = window.navigator.userAgent.toLowerCase();\n    var IOS = /(iPhone|iPad|iPod|iOS)/gi.test(UA);\n    var IPAD = /(iPad)/gi.test(UA);\n    if (IOS) {\n        var version = IPAD ? UA.match(/cpu os (\\d*)/) : UA.match(/iphone os (\\d*)/);\n        return !!(version && +version[1] < 9);\n    }\n    else {\n        return false;\n    }\n}\nfunction deepCopy(obj) {\n    return JSON.parse(JSON.stringify(obj));\n}\nfunction isImg(dom) {\n    return dom.tagName === 'IMG';\n}\nfunction isCanvas(dom) {\n    return dom.tagName === 'CANVAS';\n}\nfunction getSize(img) {\n    var iw, ih;\n    if (isImg(img)) {\n        iw = img.naturalWidth;\n        ih = img.naturalHeight;\n    }\n    else if (isCanvas(img)) {\n        iw = img.width;\n        ih = img.height;\n    }\n    else {\n        iw = img.width;\n        ih = img.height;\n    }\n    return { iw: iw, ih: ih };\n}\nfunction include(tar, value) {\n    return tar.indexOf && tar.indexOf(value) !== -1;\n}\n// 参数加工函数；\n// 兼容 5 种 value 值：\n// x:250, x:'250px', x:'100%', x:'left:250',x:'center',\n// width:100,width:'100px',width:'100%'\n// par: 父级尺寸\n// child: 自身尺寸\n// value: 值\n// type: 不同处理方式\nfunction transValue(par, child, value, type) {\n    var result = value;\n    if (_is__WEBPACK_IMPORTED_MODULE_0__[\"is\"].str(value)) {\n        if (include(value, ':') && type === 'pos') {\n            var _a = value.split(':'), _attr = _a[0], _value = _a[1];\n            switch (_attr) {\n                case 'left':\n                case 'top':\n                    result = +(_value.replace('px', ''));\n                    break;\n                case 'right':\n                case 'bottom':\n                    result = par - (+(_value.replace('px', ''))) - child;\n                    break;\n            }\n        }\n        else if (include(value, 'px')) {\n            result = (+value.replace('px', ''));\n        }\n        else if (include(value, '%')) {\n            result = (type === 'crop' ? child : par) * (+value.replace('%', '')) / 100;\n        }\n        else if (include(['top', 'left'], value)) {\n            result = 0;\n        }\n        else if (include(['bottom', 'right'], value)) {\n            result = par - child;\n        }\n        else if (value === 'center') {\n            result = (par - child) / 2;\n        }\n        else if (value === 'origin') {\n            result = child;\n        }\n        else {\n            result = +value;\n        }\n    }\n    return Math.round(result);\n}\n// 获取长度\n// imgW: 参照尺寸\n// value: 值\nfunction getLength(ref, value) {\n    var result = value;\n    if (_is__WEBPACK_IMPORTED_MODULE_0__[\"is\"].str(value)) {\n        if (include(value, 'px')) {\n            result = (+value.replace('px', ''));\n        }\n        else if (include(value, '%')) {\n            result = ref * (+value.replace('%', '')) / 100;\n        }\n        else if (value === 'center') {\n            result = ref / 2;\n        }\n        else {\n            result = +value;\n        }\n    }\n    return Math.round(result);\n}\nfunction throwError(msg) {\n    throw new Error(\"[MCanvas ERROR]: \" + msg);\n}\nfunction throwWarn(msg) {\n    throw new Error(\"[MCanvas WARN]: \" + msg);\n}\n\n\n//# sourceURL=webpack:///./src/utils/index.ts?");

/***/ }),

/***/ "./src/utils/is.ts":
/*!*************************!*\
  !*** ./src/utils/is.ts ***!
  \*************************/
/*! exports provided: type, is */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"type\", function() { return type; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"is\", function() { return is; });\nvar typeString = 'Boolean Number String Function Array Date RegExp Object Error Symbol';\nvar class2type = {};\ntypeString.split(' ').forEach(function (type) {\n    class2type[\"[object \" + type + \"]\"] = type.toLowerCase();\n});\nfunction type(object) {\n    var type = class2type.toString.call(object);\n    if (object === null)\n        return object + '';\n    if (Number.isNaN(object))\n        return 'NaN';\n    var isObject = typeof object === 'object';\n    var isFn = typeof object === 'function';\n    return isObject || isFn ? class2type[type] || 'object' : typeof object;\n}\nvar is = {\n    primitive: function (tar) {\n        return ['string', 'number'].includes(type(tar));\n    },\n    array: function (tar) {\n        return type(tar) === 'array';\n    },\n    str: function (tar) {\n        return type(tar) === 'string';\n    },\n    obj: function (tar) {\n        return type(tar) === 'object';\n    },\n    arr: function (tar) {\n        return type(tar) === 'array';\n    },\n    num: function (tar) {\n        return type(tar) === 'number';\n    },\n    fn: function (tar) {\n        return type(tar) === 'function';\n    },\n    undef: function (tar) {\n        return type(tar) === 'undefined';\n    },\n    def: function (tar) {\n        return !is.undef(tar);\n    },\n    null: function (tar) {\n        return type(tar) === 'null';\n    },\n    empty: function (tar) {\n        var t = type(tar);\n        switch (t) {\n            case 'object':\n                return Object.keys(tar).length === 0;\n            case 'array':\n                return tar.length === 0;\n            case 'string':\n                return !(tar.trim());\n            case 'undefined':\n            case 'null':\n            case 'NaN':\n            case 'boolean':\n                return true;\n            default:\n                return false;\n        }\n    },\n    Nil: function (tar) {\n        return ['null', 'undefined'].includes(type(tar));\n    },\n    NaN: function (tar) {\n        return type(tar) === 'NaN';\n    },\n    promise: function (tar) {\n        return !!tar && (is.obj(tar) || is.fn(tar)) && is.fn(tar['then']);\n    }\n};\n\n\n//# sourceURL=webpack:///./src/utils/is.ts?");

/***/ }),

/***/ "./src/utils/queue.ts":
/*!****************************!*\
  !*** ./src/utils/queue.ts ***!
  \****************************/
/*! exports provided: Queue */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Queue\", function() { return Queue; });\n/* harmony import */ var _is__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./is */ \"./src/utils/is.ts\");\n\nvar Queue = /** @class */ (function () {\n    function Queue(config) {\n        var _this = this;\n        this.isFirst = true;\n        this.queue = [];\n        this._next = function (data) {\n            if (!_this.isFirst)\n                data = _this.after(data);\n            if (_this.queue.length > 0) {\n                var fn = _this.queue.shift();\n                if (fn) {\n                    data = _this.before(data);\n                    fn(_this._next, data);\n                    _this.isFirst = false;\n                }\n            }\n            else {\n                _this.end(data);\n                _this.queue = [];\n            }\n        };\n        var _a = config || {}, _b = _a.before, before = _b === void 0 ? function (data) { return data; } : _b, _c = _a.after, after = _c === void 0 ? function (data) { return data; } : _c;\n        this.before = before;\n        this.after = after;\n    }\n    Queue.prototype.push = function (fn) {\n        if (_is__WEBPACK_IMPORTED_MODULE_0__[\"is\"].fn(fn))\n            this.queue.push(fn);\n    };\n    Queue.prototype.perform = function (end, initData) {\n        this.end = end;\n        this._next(initData);\n    };\n    return Queue;\n}());\n\n\n\n//# sourceURL=webpack:///./src/utils/queue.ts?");

/***/ }),

/***/ 0:
/*!*******************************!*\
  !*** multi ./example/node.ts ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__(/*! /Users/guoxiaodong/Documents/App/@github/mcanvas/example/node.ts */\"./example/node.ts\");\n\n\n//# sourceURL=webpack:///multi_./example/node.ts?");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"fs\");\n\n//# sourceURL=webpack:///external_%22fs%22?");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"http\");\n\n//# sourceURL=webpack:///external_%22http%22?");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"https\");\n\n//# sourceURL=webpack:///external_%22https%22?");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"path\");\n\n//# sourceURL=webpack:///external_%22path%22?");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"querystring\");\n\n//# sourceURL=webpack:///external_%22querystring%22?");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"stream\");\n\n//# sourceURL=webpack:///external_%22stream%22?");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"url\");\n\n//# sourceURL=webpack:///external_%22url%22?");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"util\");\n\n//# sourceURL=webpack:///external_%22util%22?");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"zlib\");\n\n//# sourceURL=webpack:///external_%22zlib%22?");

/***/ })

/******/ });